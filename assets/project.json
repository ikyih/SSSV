{"targets":[{"isStage":true,"name":"Stage","variables":{"`jEk@4|i[#Fk?(8x)AV.-my variable":["my variable",0]},"lists":{},"broadcasts":{"}1=OawD:?+3s;XCjqq(-":"JSONvalidator","Q9wIU)E06gicxyB!!VNe":"JSONvalidatorfail","$(vAcnVX]Lnqv}E6c:[Y":"JSONvalidatorgood","hWv_BeIs!VaA+85oq$T6":"cc","rO8JoT.;RHRrAi25a7aU":"ccgood","#g0CuyBi]D$oP1@d}eHa":"ccbad","c6p]OgBw{Gp#]eQp^i{6":"day0"},"blocks":{")":{"opcode":"event_whenbroadcastreceived","next":"o","parent":null,"inputs":{},"fields":{"BROADCAST_OPTION":["JSONvalidator","}1=OawD:?+3s;XCjqq(-"]},"topLevel":true},"o":{"opcode":"looks_switchbackdropto","next":null,"parent":")","inputs":{"BACKDROP":[1,"*"]},"fields":{}},"*":{"opcode":"looks_backdrops","next":null,"parent":"o","inputs":{},"fields":{"BACKDROP":["backdrop2",null]},"shadow":true},"+":{"opcode":"event_whenflagclicked","next":"p","parent":null,"inputs":{},"fields":{},"topLevel":true},"p":{"opcode":"looks_switchbackdropto","next":null,"parent":"+","inputs":{"BACKDROP":[1,","]},"fields":{}},",":{"opcode":"looks_backdrops","next":null,"parent":"p","inputs":{},"fields":{"BACKDROP":["backdrop1",null]},"shadow":true},"-":{"opcode":"event_whenbroadcastreceived","next":"q","parent":null,"inputs":{},"fields":{"BROADCAST_OPTION":["JSONvalidatorfail","Q9wIU)E06gicxyB!!VNe"]},"topLevel":true},"q":{"opcode":"looks_switchbackdropto","next":null,"parent":"-","inputs":{"BACKDROP":[1,"."]},"fields":{}},".":{"opcode":"looks_backdrops","next":null,"parent":"q","inputs":{},"fields":{"BACKDROP":["backdrop3",null]},"shadow":true},"/":{"opcode":"event_whenbroadcastreceived","next":"r","parent":null,"inputs":{},"fields":{"BROADCAST_OPTION":["JSONvalidatorgood","$(vAcnVX]Lnqv}E6c:[Y"]},"topLevel":true},"r":{"opcode":"looks_switchbackdropto","next":null,"parent":"/","inputs":{"BACKDROP":[1,":"]},"fields":{}},":":{"opcode":"looks_backdrops","next":null,"parent":"r","inputs":{},"fields":{"BACKDROP":["backdrop4",null]},"shadow":true},";":{"opcode":"event_whenbroadcastreceived","next":"s","parent":null,"inputs":{},"fields":{"BROADCAST_OPTION":["cc","hWv_BeIs!VaA+85oq$T6"]},"topLevel":true},"s":{"opcode":"looks_switchbackdropto","next":null,"parent":";","inputs":{"BACKDROP":[1,"="]},"fields":{}},"=":{"opcode":"looks_backdrops","next":null,"parent":"s","inputs":{},"fields":{"BACKDROP":["backdrop5",null]},"shadow":true},"?":{"opcode":"event_whenbroadcastreceived","next":"t","parent":null,"inputs":{},"fields":{"BROADCAST_OPTION":["ccgood","rO8JoT.;RHRrAi25a7aU"]},"topLevel":true},"t":{"opcode":"looks_switchbackdropto","next":null,"parent":"?","inputs":{"BACKDROP":[1,"@"]},"fields":{}},"@":{"opcode":"looks_backdrops","next":null,"parent":"t","inputs":{},"fields":{"BACKDROP":["backdrop7",null]},"shadow":true},"[":{"opcode":"event_whenbroadcastreceived","next":"u","parent":null,"inputs":{},"fields":{"BROADCAST_OPTION":["ccbad","#g0CuyBi]D$oP1@d}eHa"]},"topLevel":true},"u":{"opcode":"looks_switchbackdropto","next":null,"parent":"[","inputs":{"BACKDROP":[1,"]"]},"fields":{}},"]":{"opcode":"looks_backdrops","next":null,"parent":"u","inputs":{},"fields":{"BACKDROP":["backdrop6",null]},"shadow":true},"^":{"opcode":"event_whenbroadcastreceived","next":"v","parent":null,"inputs":{},"fields":{"BROADCAST_OPTION":["day0","c6p]OgBw{Gp#]eQp^i{6"]},"topLevel":true},"v":{"opcode":"looks_switchbackdropto","next":null,"parent":"^","inputs":{"BACKDROP":[1,"_"]},"fields":{}},"_":{"opcode":"looks_backdrops","next":null,"parent":"v","inputs":{},"fields":{"BACKDROP":["backdrop8",null]},"shadow":true}},"comments":{"az":{"blockId":null,"x":50,"y":50,"width":350,"height":170,"minimized":false,"text":"Configuration for https://turbowarp.org/\nYou can move, resize, and minimize this comment, but don't edit it by hand. This comment can be deleted to remove the stored settings.\n{\"framerate\":60,\"runtimeOptions\":{\"maxClones\":Infinity,\"miscLimits\":false,\"fencing\":false},\"width\":640} // _twconfig_"}},"currentCostume":0,"costumes":[{"name":"backdrop1","bitmapResolution":1,"dataFormat":"svg","assetId":"665f41694fec0a50f47e30ec2b546d89","md5ext":"665f41694fec0a50f47e30ec2b546d89.svg","rotationCenterX":272.6346923217773,"rotationCenterY":169.40895241603465},{"name":"backdrop2","bitmapResolution":1,"dataFormat":"svg","assetId":"d9df8f79a6b34298ec7b26c3ce6eb891","md5ext":"d9df8f79a6b34298ec7b26c3ce6eb891.svg","rotationCenterX":239.59638826841933,"rotationCenterY":167.9074484984985},{"name":"backdrop3","bitmapResolution":1,"dataFormat":"svg","assetId":"af01c84626d6bbc6a866b167449bc30b","md5ext":"af01c84626d6bbc6a866b167449bc30b.svg","rotationCenterX":209.1803945800781,"rotationCenterY":166.40594849849847},{"name":"backdrop4","bitmapResolution":1,"dataFormat":"svg","assetId":"0a6ad1dd48d0e872d589518322a1392b","md5ext":"0a6ad1dd48d0e872d589518322a1392b.svg","rotationCenterX":209.180375,"rotationCenterY":166.40595},{"name":"backdrop5","bitmapResolution":1,"dataFormat":"svg","assetId":"8a5aa7c5385d81767de6de5c1eb5dfc5","md5ext":"8a5aa7c5385d81767de6de5c1eb5dfc5.svg","rotationCenterX":206.68235939483648,"rotationCenterY":167.90744999999998},{"name":"backdrop6","bitmapResolution":1,"dataFormat":"svg","assetId":"02cf720afc6647e2358154bc79ddc0ac","md5ext":"02cf720afc6647e2358154bc79ddc0ac.svg","rotationCenterX":201.99622195129393,"rotationCenterY":166.40595},{"name":"backdrop7","bitmapResolution":1,"dataFormat":"svg","assetId":"99733262946666ca451474ab691d25d6","md5ext":"99733262946666ca451474ab691d25d6.svg","rotationCenterX":201.99621061996464,"rotationCenterY":166.40595},{"name":"backdrop8","bitmapResolution":1,"dataFormat":"svg","assetId":"f9cd53d9279dfb03b5a1f2386eb2ea79","md5ext":"f9cd53d9279dfb03b5a1f2386eb2ea79.svg","rotationCenterX":476.4999999999998,"rotationCenterY":262}],"sounds":[],"volume":100,"layerOrder":0,"tempo":60,"videoTransparency":50,"videoState":"on","textToSpeechLanguage":null},{"isStage":false,"name":"validator","variables":{},"lists":{},"broadcasts":{},"blocks":{"w":{"opcode":"skyhigh173JSON_json_is_valid","next":null,"parent":"a","inputs":{"json":[3,"x",[10,"{\"key\":\"value\"}"]]},"fields":{}},"e":{"opcode":"0832rxfs2_start","next":"b","parent":"f","inputs":{"STR":[3,"`",[10,"/temp/backup/"]]},"fields":{}},"{":{"opcode":"filesExpanded_fileInfo","next":null,"parent":null,"inputs":{"FORMAT":[1,"|"]},"fields":{},"topLevel":true},"|":{"opcode":"filesExpanded_menu_FILE_INFO","next":null,"parent":"{","inputs":{},"fields":{"FILE_INFO":["name",null]},"shadow":true},"`":{"opcode":"operator_join","next":null,"parent":"e","inputs":{"STRING1":[1,[10,"/temp/save/"]],"STRING2":[1,[10,"save"]]},"fields":{}},"y":{"opcode":"0832rxfs2_clean","next":"f","parent":"g","inputs":{},"fields":{}},"b":{"opcode":"0832rxfs2_folder","next":"h","parent":"e","inputs":{"STR":[3,"}",[10,"/rxFS/example"]],"STR2":[3,"z",[10,"rxFS is good!"]]},"fields":{}},"}":{"opcode":"operator_join","next":null,"parent":"b","inputs":{"STRING1":[1,[10,"/temp/save/"]],"STRING2":[1,[10,"save"]]},"fields":{}},"~":{"opcode":"filesExpanded_fileInfo","next":null,"parent":null,"inputs":{"FORMAT":[1,"aa"]},"fields":{},"topLevel":true},"aa":{"opcode":"filesExpanded_menu_FILE_INFO","next":null,"parent":"~","inputs":{},"fields":{"FILE_INFO":["name",null]},"shadow":true},"z":{"opcode":"filesExpanded_fileInfo","next":null,"parent":"b","inputs":{"FORMAT":[1,"ab"]},"fields":{}},"ab":{"opcode":"filesExpanded_menu_FILE_INFO","next":null,"parent":"z","inputs":{},"fields":{"FILE_INFO":["data",null]},"shadow":true},"ac":{"opcode":"event_whenflagclicked","next":"g","parent":null,"inputs":{},"fields":{},"topLevel":true},"az":{"opcode":"looks_say","next":null,"parent":null,"inputs":{"MESSAGE":[1,[10,"Hello!"]]},"fields":{},"topLevel":true},"f":{"opcode":"looks_sayforsecs","next":"e","parent":"y","inputs":{"MESSAGE":[3,"A",[10,"Hello!"]],"SECS":[1,[4,"0"]]},"fields":{}},"B":{"opcode":"event_broadcast","next":"a","parent":"h","inputs":{"BROADCAST_INPUT":[1,[11,"JSONvalidator","}1=OawD:?+3s;XCjqq(-"]]},"fields":{}},"ad":{"opcode":"operator_join","next":null,"parent":"x","inputs":{"STRING1":[1,[10,"/temp/save/"]],"STRING2":[1,[10,"save"]]},"fields":{}},"ae":{"opcode":"filesExpanded_fileInfo","next":null,"parent":null,"inputs":{"FORMAT":[1,"af"]},"fields":{},"topLevel":true},"af":{"opcode":"filesExpanded_menu_FILE_INFO","next":null,"parent":"ae","inputs":{},"fields":{"FILE_INFO":["name",null]},"shadow":true},"a":{"opcode":"control_if_else","next":null,"parent":"B","inputs":{"CONDITION":[2,"w"],"SUBSTACK2":[2,"C"],"SUBSTACK":[2,"D"]},"fields":{}},"x":{"opcode":"0832rxfs2_open","next":null,"parent":"w","inputs":{"STR":[3,"ad",[10,"/rxFS/example"]]},"fields":{}},"C":{"opcode":"control_wait","next":"ag","parent":"a","inputs":{"DURATION":[1,[5,"1"]]},"fields":{}},"ag":{"opcode":"event_broadcast","next":null,"parent":"C","inputs":{"BROADCAST_INPUT":[1,[11,"JSONvalidatorfail","Q9wIU)E06gicxyB!!VNe"]]},"fields":{}},"A":{"opcode":"filesExpanded_showPickerExtensionsAs","next":null,"parent":"f","inputs":{"extension":[1,[10,".stuff"]],"as":[1,"ah"]},"fields":{}},"ah":{"opcode":"filesExpanded_menu_encoding","next":null,"parent":"A","inputs":{},"fields":{"encoding":["text",null]},"shadow":true},"D":{"opcode":"control_wait","next":"ai","parent":"a","inputs":{"DURATION":[1,[5,"1"]]},"fields":{}},"ai":{"opcode":"event_broadcast","next":null,"parent":"D","inputs":{"BROADCAST_INPUT":[1,[11,"JSONvalidatorgood","$(vAcnVX]Lnqv}E6c:[Y"]]},"fields":{}},"h":{"opcode":"lmscomments_commentC","next":"E","parent":"b","inputs":{"COMMENT":[1,[10,"JSON Validator"]],"SUBSTACK":[2,"B"]},"fields":{}},"F":{"opcode":"lmscomments_commentC","next":null,"parent":"E","inputs":{"COMMENT":[1,[10,"Value Checker"]],"SUBSTACK":[2,"G"]},"fields":{}},"G":{"opcode":"event_broadcast","next":"i","parent":"F","inputs":{"BROADCAST_INPUT":[1,[11,"cc","hWv_BeIs!VaA+85oq$T6"]]},"fields":{}},"c":{"opcode":"control_if_else","next":null,"parent":"d","inputs":{"CONDITION":[2,"j"],"SUBSTACK":[2,"H"],"SUBSTACK2":[2,"I"]},"fields":{}},"aA":{"opcode":"skyhigh173JSON_json_is_valid","next":null,"parent":null,"inputs":{"json":[1,[10,"{\"key\":\"value\"}"]]},"fields":{},"topLevel":true},"J":{"opcode":"0832rxfs2_open","next":null,"parent":"K","inputs":{"STR":[3,"aj",[10,"/rxFS/example"]]},"fields":{}},"aj":{"opcode":"operator_join","next":null,"parent":"J","inputs":{"STRING1":[1,[10,"/temp/save/"]],"STRING2":[1,[10,"save"]]},"fields":{}},"ak":{"opcode":"filesExpanded_fileInfo","next":null,"parent":null,"inputs":{"FORMAT":[1,"al"]},"fields":{},"topLevel":true},"al":{"opcode":"filesExpanded_menu_FILE_INFO","next":null,"parent":"ak","inputs":{},"fields":{"FILE_INFO":["name",null]},"shadow":true},"H":{"opcode":"control_wait","next":"am","parent":"c","inputs":{"DURATION":[1,[5,"1"]]},"fields":{}},"am":{"opcode":"event_broadcast","next":null,"parent":"H","inputs":{"BROADCAST_INPUT":[1,[11,"ccgood","rO8JoT.;RHRrAi25a7aU"]]},"fields":{}},"I":{"opcode":"control_wait","next":"an","parent":"c","inputs":{"DURATION":[1,[5,"1"]]},"fields":{}},"an":{"opcode":"event_broadcast","next":null,"parent":"I","inputs":{"BROADCAST_INPUT":[1,[11,"ccbad","#g0CuyBi]D$oP1@d}eHa"]]},"fields":{}},"aB":{"opcode":"skyhigh173JSON_json_is_valid","next":null,"parent":null,"inputs":{"json":[1,[10,"{\"key\":\"value\"}"]]},"fields":{},"topLevel":true},"ao":{"opcode":"skyhigh173JSON_json_is","next":null,"parent":null,"inputs":{"json":[1,[10,"{\"key\":\"valu,e\"}"]],"types":[1,"ap"]},"fields":{},"topLevel":true},"ap":{"opcode":"skyhigh173JSON_menu_types","next":null,"parent":"ao","inputs":{},"fields":{"types":["Object",null]},"shadow":true},"i":{"opcode":"control_if","next":null,"parent":"G","inputs":{"SUBSTACK":[2,"d"],"CONDITION":[2,"L"]},"fields":{}},"M":{"opcode":"filesExpanded_fileInfo","next":null,"parent":"L","inputs":{"FORMAT":[1,"aq"]},"fields":{}},"aq":{"opcode":"filesExpanded_menu_FILE_INFO","next":null,"parent":"M","inputs":{},"fields":{"FILE_INFO":["name",null]},"shadow":true},"L":{"opcode":"operator_equals","next":null,"parent":"i","inputs":{"OPERAND1":[3,"M",[10,"sasquatch.stuff"]],"OPERAND2":[1,[10,"sasquatch.stuff"]]},"fields":{}},"K":{"opcode":"skyhigh173JSON_json_get","next":null,"parent":"N","inputs":{"item":[1,[10,"hunger"]],"json":[3,"J",[10,"{\"key\":\"value\"}"]]},"fields":{}},"O":{"opcode":"operator_equals","next":null,"parent":"j","inputs":{"OPERAND1":[3,"N",[10,""]],"OPERAND2":[1,[10,"true"]]},"fields":{}},"aC":{"opcode":"operator_and","next":null,"parent":null,"inputs":{"OPERAND1":[1,null]},"fields":{},"topLevel":true},"N":{"opcode":"operator_lt","next":null,"parent":"O","inputs":{"OPERAND1":[3,"K",[10,"5"]],"OPERAND2":[1,[10,"6"]]},"fields":{}},"aD":{"opcode":"operator_equals","next":null,"parent":null,"inputs":{"OPERAND1":[1,[10,""]],"OPERAND2":[1,[10,"50"]]},"fields":{},"topLevel":true},"aE":{"opcode":"operator_gt","next":null,"parent":null,"inputs":{"OPERAND1":[1,[10,""]],"OPERAND2":[1,[10,"6"]]},"fields":{},"topLevel":true},"P":{"opcode":"operator_equals","next":null,"parent":"k","inputs":{"OPERAND1":[3,"Q",[10,""]],"OPERAND2":[1,[10,"1"]]},"fields":{}},"j":{"opcode":"operator_and","next":null,"parent":"c","inputs":{"OPERAND1":[2,"O"],"OPERAND2":[2,"k"]},"fields":{}},"d":{"opcode":"control_if_else","next":null,"parent":"i","inputs":{"SUBSTACK":[2,"R"],"SUBSTACK2":[2,"c"],"CONDITION":[2,"l"]},"fields":{}},"R":{"opcode":"control_wait","next":"ar","parent":"d","inputs":{"DURATION":[1,[5,"1"]]},"fields":{}},"ar":{"opcode":"event_broadcast","next":null,"parent":"R","inputs":{"BROADCAST_INPUT":[1,[11,"day0","c6p]OgBw{Gp#]eQp^i{6"]]},"fields":{}},"S":{"opcode":"operator_equals","next":null,"parent":"l","inputs":{"OPERAND1":[3,"T",[10,""]],"OPERAND2":[1,[10,"0"]]},"fields":{}},"T":{"opcode":"skyhigh173JSON_json_get","next":null,"parent":"S","inputs":{"item":[1,[10,"day"]],"json":[3,"U",[10,"{\"key\":\"value\"}"]]},"fields":{}},"U":{"opcode":"0832rxfs2_open","next":null,"parent":"T","inputs":{"STR":[3,"as",[10,"/rxFS/example"]]},"fields":{}},"as":{"opcode":"operator_join","next":null,"parent":"U","inputs":{"STRING1":[1,[10,"/temp/save/"]],"STRING2":[1,[10,"save"]]},"fields":{}},"l":{"opcode":"operator_or","next":null,"parent":"d","inputs":{"OPERAND2":[2,"V"],"OPERAND1":[2,"S"]},"fields":{}},"V":{"opcode":"operator_equals","next":null,"parent":"l","inputs":{"OPERAND1":[3,"W",[10,""]],"OPERAND2":[1,[10,"1"]]},"fields":{}},"W":{"opcode":"skyhigh173JSON_json_get","next":null,"parent":"V","inputs":{"item":[1,[10,"day"]],"json":[3,"X",[10,"{\"key\":\"value\"}"]]},"fields":{}},"X":{"opcode":"0832rxfs2_open","next":null,"parent":"W","inputs":{"STR":[3,"at",[10,"/rxFS/example"]]},"fields":{}},"at":{"opcode":"operator_join","next":null,"parent":"X","inputs":{"STRING1":[1,[10,"/temp/save/"]],"STRING2":[1,[10,"save"]]},"fields":{}},"E":{"opcode":"control_wait","next":"F","parent":"h","inputs":{"DURATION":[1,[5,"1"]]},"fields":{}},"Q":{"opcode":"skyhigh173JSON_json_get","next":null,"parent":"P","inputs":{"item":[1,[10,"weather"]],"json":[3,"Y",[10,"{\"key\":\"value\"}"]]},"fields":{}},"Y":{"opcode":"0832rxfs2_open","next":null,"parent":"Q","inputs":{"STR":[3,"au",[10,"/rxFS/example"]]},"fields":{}},"au":{"opcode":"operator_join","next":null,"parent":"Y","inputs":{"STRING1":[1,[10,"/temp/save/"]],"STRING2":[1,[10,"save"]]},"fields":{}},"k":{"opcode":"operator_or","next":null,"parent":"j","inputs":{"OPERAND1":[2,"Z"],"OPERAND2":[2,"P"]},"fields":{}},"Z":{"opcode":"operator_equals","next":null,"parent":"k","inputs":{"OPERAND1":[3,"!",[10,""]],"OPERAND2":[1,[10,"0"]]},"fields":{}},"!":{"opcode":"skyhigh173JSON_json_get","next":null,"parent":"Z","inputs":{"item":[1,[10,"weather"]],"json":[3,"#",[10,"{\"key\":\"value\"}"]]},"fields":{}},"#":{"opcode":"0832rxfs2_open","next":null,"parent":"!","inputs":{"STR":[3,"av",[10,"/rxFS/example"]]},"fields":{}},"av":{"opcode":"operator_join","next":null,"parent":"#","inputs":{"STRING1":[1,[10,"/temp/save/"]],"STRING2":[1,[10,"save"]]},"fields":{}},"m":{"opcode":"filesExpanded_fontSet","next":"%","parent":"n","inputs":{"FONT":[1,"aw"]},"fields":{}},"aw":{"opcode":"filesExpanded_menu_font","next":null,"parent":"m","inputs":{},"fields":{"font":["\"BreeSerif-Regular\", Sans Serif",null]},"shadow":true},"%":{"opcode":"filesExpanded_textSet","next":"(","parent":"m","inputs":{"TEXT":[1,[10,"Insert a .Stuff Here"]]},"fields":{}},"n":{"opcode":"filesExpanded_borderColors","next":"m","parent":"g","inputs":{"OPTION":[1,"ax"],"COLOR":[1,[9,"#000000"]]},"fields":{}},"ax":{"opcode":"filesExpanded_menu_visualColors","next":null,"parent":"n","inputs":{},"fields":{"visualColors":["border",null]},"shadow":true},"(":{"opcode":"filesExpanded_borderTypeSet","next":null,"parent":"%","inputs":{"TYPE":[1,"ay"]},"fields":{}},"ay":{"opcode":"filesExpanded_menu_borderTypes","next":null,"parent":"(","inputs":{},"fields":{"borderTypes":["solid",null]},"shadow":true},"g":{"opcode":"lmscomments_commentC","next":"y","parent":"ac","inputs":{"COMMENT":[1,[10,"file style"]],"SUBSTACK":[2,"n"]},"fields":{}}},"comments":{},"currentCostume":0,"costumes":[{"name":"costume1","bitmapResolution":1,"dataFormat":"svg","assetId":"14e46ec3e2ba471c2adfe8f119052307","md5ext":"14e46ec3e2ba471c2adfe8f119052307.svg","rotationCenterX":0,"rotationCenterY":0}],"sounds":[],"volume":100,"layerOrder":1,"visible":true,"x":0,"y":0,"size":100,"direction":90,"draggable":false,"rotationStyle":"all around"}],"monitors":[],"extensions":["skyhigh173JSON","0832rxfs2","filesExpanded","lmscomments"],"extensionURLs":{"skyhigh173JSON":"https://extensions.turbowarp.org/Skyhigh173/json.js","0832rxfs2":"https://extensions.turbowarp.org/0832/rxFS2.js","filesExpanded":"data:text/javascript;base64,Ly8gTmFtZTogRmlsZXMgRXhwYW5kZWQKLy8gSUQ6IGZpbGVzRXhwYW5kZWQKLy8gRGVzY3JpcHRpb246IFJlYWQsIHVwbG9hZCwgYW5kIGRvd25sb2FkIGZpbGVzLgovLyBCeTogU2hhcmtQb29sLCBHYXJib011ZmZpbiwgRHJhZ28gQ3V2ZW4sIDB6bnp3LCBhbmQgRnVycnlSCgovLyBWZXJzaW9uIDEuNi4wCgooZnVuY3Rpb24gKFNjcmF0Y2gpIHsKICAidXNlIHN0cmljdCI7CiAgaWYgKCFTY3JhdGNoLmV4dGVuc2lvbnMudW5zYW5kYm94ZWQpIHRocm93IG5ldyBFcnJvcigiRmlsZXMgRXhwYW5kZWQgbXVzdCBiZSBydW4gdW5zYW5kYm94ZWQiKTsKCiAgY29uc3QgbWVudUljb25VUkkgPQoiZGF0YTppbWFnZS9zdmcreG1sO2Jhc2U2NCxQSE4yWnlCNGJXeHVjejBpYUhSMGNEb3ZMM2QzZHk1M015NXZjbWN2TWpBd01DOXpkbWNpSUhkcFpIUm9QU0l4TXpNdU1UWTBJaUJvWldsbmFIUTlJakV6TXk0eE5qUWlJSFpwWlhkQ2IzZzlJakFnTUNBeE16TXVNVFkwSURFek15NHhOalFpUGp4bklITjBjbTlyWlMxdGFYUmxjbXhwYldsMFBTSXhNQ0krUEhCaGRHZ2daRDBpVFRNZ05qWXVOVGd5UXpNZ016RXVORFkzSURNeExqUTJOeUF6SURZMkxqVTRNaUF6Y3pZekxqVTRNaUF5T0M0ME5qY2dOak11TlRneUlEWXpMalU0TWkweU9DNDBOamNnTmpNdU5UZ3lMVFl6TGpVNE1pQTJNeTQxT0RKVE15QXhNREV1TmprM0lETWdOall1TlRneWVpSWdabWxzYkQwaUkyWmpZakV3TXlJZ2MzUnliMnRsUFNJalltWTRZakV4SWlCemRISnZhMlV0ZDJsa2RHZzlJallpTHo0OGNHRjBhQ0JrUFNKTk9Ua3VPRGt5SURRNUxqa3lOM1kwT1M0NU5qUmpNQ0EwTGpVNExUTXVOelE0SURndU16STRMVGd1TXpJNElEZ3VNekk0U0RReExqVTFPR010TkM0MU9DQXdMVGd1TWpnMUxUTXVOelE0TFRndU1qZzFMVGd1TXpJNGJDNHdOREV0TmpZdU5qRTRZekF0TkM0MU9DQXpMamN3TmkwNExqTXlPQ0E0TGpJNE5pMDRMak15T0dnek15NHpNWG9pSUdacGJHdzlJbTV2Ym1VaUlITjBjbTlyWlMxdmNHRmphWFI1UFNJdU1UUTVJaUJ6ZEhKdmEyVTlJaU13TURBaUlITjBjbTlyWlMxM2FXUjBhRDBpTVRBaUx6NDhjR0YwYUNCa1BTSk5PVGt1T0RreUlEUTVMamt5TjNZME9TNDVOalJqTUNBMExqVTRMVE11TnpRNElEZ3VNekk0TFRndU16STRJRGd1TXpJNFNEUXhMalUxT0dNdE5DNDFPQ0F3TFRndU1qZzFMVE11TnpRNExUZ3VNamcxTFRndU16STRiQzR3TkRFdE5qWXVOakU0WXpBdE5DNDFPQ0F6TGpjd05pMDRMak15T0NBNExqSTROaTA0TGpNeU9HZ3pNeTR6TVhvaUlHWnBiR3c5SWlObVptWWlMejQ4Y0dGMGFDQmtQU0pOTnpBdU56SXlJRFUwTGpFeE5WWXpNUzR4Tmpkc01qSXVPVFEzSURJeUxqazBPSG9pSUdacGJHdzlJaU5tWTJJeE1ETWlMejQ4Y0dGMGFDQmtQU0pOT0RRdU5qWTRJRFk1TGpreE5HTXRMakF5TGpBNE9DMHVNRE0yTGpFM05TMHVNRFl5TGpJMk1pMHVNRGMzTGpNeU5DMHVNak0ySURFdU1Ea3RMak01TmlBeUxqVTROM0V1TURBeExqQXpPQzB1TURBMUxqQTJNV011T0RnZ015NDFNemd0TGpZd01pQTFMalk1TWkweExqVTROQ0EyTGpZM05HRXlJRElnTUNBd0lERXRMakl1TVRsakxTNDVOakl1T0RjMUxUSXVOalF6SURFdU9URTRMVFV1TVRVeUlERXVPVEU0WVRjdU5qVWdOeTQyTlNBd0lEQWdNUzB6TGpRek5TMHVOemcyWXk0d01qWWdNUzQwTURNdU1EUXhJRE11TXpNM0xqQTBNU0EyTGpBeVlUWXVPU0EyTGprZ01DQXdJREVnTWk0ME9UUWdNUzQxTXpnZ055NHhJRGN1TVNBd0lEQWdNU0F5TGpJeElEVXVNVFkzWXpBZ01pNDVNUzB4TGpZM05TQTFMalEwTFRRdU16YzFJRFl1TlRrM2NTMHVNVEF6TGpBME9DMHVNakExTGpBNE9HTXRMamt3TlM0ek5EUXRNUzQ1TWpNdU5URTBMVE11TVRFMkxqVXhOQzB1TkRNeUlEQXRMamc1TlMwdU1ESXRNUzR6T1RrdExqQTJOMkV4T0NBeE9DQXdJREFnTUMweExqSTVOUzR3TURWakxTNDVOekl1TVRBNExUSXVNelF1TWpFMkxUUXVNVGN1TXpFNUxTNHdNellnTUMwdU1EY3lMakF3TlMwdU1URTBMakF3TlhFdExqTTJMakF4TlMwdU5qazVMakF4TldNdE15NHlOelVnTUMwMUxqWTJOaTB4TGpBek9DMDNMakV4TFRNdU1EaHhMUzR3TkRZdExqQTJMUzR3T0RNdExqRXlNMk10TVM0ME55MHlMakU1TlMweExqVXhNaTAwTGprM01pMHVNVEV6TFRjdU1qUnhMakF4TnkwdU1ETTFMakEwTVMwdU1EY3hZeTQ0T1MweExqTTVPU0F5TGpFNUxUSXVNemsySURNdU9EYzNMVEl1T1RnekxqQXlMUzQ1T1RJdU1ERTFMVEl1TWpNMkxTNHdNVFl0TXk0M01USmhOeTQxSURjdU5TQXdJREFnTVMweUxqZzVMalUxTldNdE1pNDROak1nTUMwMUxqSXlPQzB4TGpjd01TMDJMakExTVMwMExqSTRPQzB1TVRjdExqVXlOQzB1TXpNdE1TNHlPUzB1TnkwekxqQXhPR0V5SURJZ01DQXdJREV0TGpBek5TMHVNVGcxYkMwdU56WXhMVFF1TWpVeVlUY2dOeUF3SURBZ01DMHVNVEF6TFM0ek1qUmpMUzR6T1RZdE1TNHhNall0TGpVNE1TMHlMakE0TXkwdU5UZ3hMVE11TURBNElEQXRNUzR4TkRjdU16TTBMVEl1T0RnZ01TNDVNVGd0TkM0Mk1EY3VOemszTFM0NE56UWdNaTR5TkRjdE1pNHdNRFVnTkM0MU9ERXRNaTR6TjNFdU5ETXpMUzR3TnpFdU9EYzBMUzR3TnpKb05TNDJPRGR4TGpFNU1pQXdJQzR6T0RVdU1ERTFZVGN5SURjeUlEQWdNQ0F3SURVdU56Z3RMakF3TlNBNE15QTRNeUF3SURBZ01DQTJMamt6TFM0MU9UWmpMakkxT0MwdU1EZ3pMalV6TmkwdU1UWTFMamd6TkMwdU1qTTNMakk0TXkwdU1EY3lMalUzTFM0eE1UZ3VPRFU0TFM0eE5TQXlMakU1TFM0eUlEUXVNak15TGpRek15QTFMamd5SURFdU56a2dNUzQ1TnlBeExqWTVNaUF5TGpnMElEUXVNalV5SURJdU16SWdOaTQ0TlRRaUlHWnBiR3c5SWlOaVpqaGlNVEVpTHo0OGNHRjBhQ0JrUFNKTk56a3VNVEl4SURZNExqZ3dObkV0TGpNeE5pQXhMakkyTmkwdU5UUXpJRE11TkRNM0xTNHdPU0F4TGpBNE5pNHdPU0F4TGpjMk5DNHpNVFlnTVM0eE16RXRMakEwTkNBeExqUTVNeTB1TkRrNUxqUTFNUzB4TGpNMU55NDBOVEl0TGprNU5pQXdMVEV1TXpFeUxTNDFPVEpCTkRFZ05ERWdNQ0F3SURFZ056WWdOekV1T1RRemNTNHdPUzB4TGprMkxqQTVMVEl1TURVdExqQTBOU0F3TFM0eE16VXRMakE1TWkwMExqSXdOeTR4T0RNdE55NDVNVFV1TlRRMUxTNHdPUzQwTlRNZ01DQXhMalExTGpFNElERXVOREEwTGpFNElERXVOak10TGpFNElERXVOREEyTFM0eE9DQTBMakUzTGpFNElERXVNVGM1TGpFNElERXdMakV3Tm5ZekxqTXdPWEV3SUM0M055NHlNalVnTVM0d09EZG9NaTQzTnpkeExqYzJNaTB1TURrZ01TNHlNekl1TXpZeUxqUTNMalExTXk0ME55QXhMakE0TlNBd0lDNDVPVFF0TGprMUlERXVOREF6TFM0MU9EZ3VNakkxTFRJdU1EZ3VNRGt0TGpjeU15MHVNRFExTFRJdU1USTJJREF0TVM0eU5qVXVNVFUzTFRRdU1EY3VNekUyTFRJdU5EUXpMakE1TFRJdU9UZzFMUzQyTnpndExqTTJNeTB1TlRReUlEQXRNUzR4TXk0Mk16SXRMams1TlNBekxqTXdNaTB1T1RrMUxqazBPQ0F3SURFdU1UYzFMUzR4TlRndU1qSTJMUzR4Tmk0eU1qWXRMall4VmpnNUxqQXpjUzR4TXpVdE1pNHpNRElnTUMwMkxqZzJNUzB1TVRndE5pNDFORFF1TVRneExURXhMalV3T1d3dExqRXpOeTB1TVRNMmNTMHhMall6Tnk0d09TMDFMakkzTlMwdU1Ea3RMalF4SURBdE1pNDNOelF1TVRneExqVTROeUEwTGpFeE55NDNNak1nTmk0eE9UWWdNQ0F1TWpjeUxTNHdPU0F4TGpJeU1TMHVNRFEyTGpZM09DMHhMakV6TVM0Mk56a3RMalU0T1NBd0xTNDJOemd0TGpRd05DMHVNRFEyTFM0d09TMHVOVFF6TFRJdU5ESXliQzB1TnpZNUxUUXVNekEyY1RBdExqRTNPUzB1TXpFMkxURXVNVEl4TFM0eU55MHVOelkwTFM0eU55MHhMakUyTmkwdU1EQXhMUzR6TVRVdU5ETXRMamM0TlM0ME15MHVORGN4SURFdU1qZzVMUzQyTURab05TNDJNRGh4TXk0Mk5qTXVNVE0xSURZdU5URXlJREJoT0RnZ09EZ2dNQ0F3SURBZ09DNHdOUzB1TnpJMGNTNHlOek10TGpFek5TNDRNVFF0TGpJM0xqazVOUzB1TURrZ01TNDJNamt1TkRVeUxqWXpNeTQxTkM0ME5USWdNUzQwTkRjaUlHWnBiR3c5SWlObVptWWlMejQ4TDJjK1BDOXpkbWMrIjsKCiAgY29uc3Qgdm0gPSBTY3JhdGNoLnZtOwogIGNvbnN0IHJ1bnRpbWUgPSB2bS5ydW50aW1lOwogIGxldCBzZWxlY3Rvck9wdGlvbnMgPSB7CiAgICBib3JkZXI6ICIjODg4IiwgdGV4dDogIiMwMDAiLCBvdXRlcjogIiNmZmYiLAogICAgc2l6ZUZvbnQ6IDEuNSwgYm9yZGVyUmFkaXVzOiAxNiwgYm9yZGVyVHlwZTogImRhc2hlZCIsCiAgICBmb250OiAiaW5oZXJpdCIsIHNoYWRvdzogMC41LCBpbWFnZTogIiIsIGltYWdlU2NhbGU6IDEwMCwKICAgIHRleHRWOiAiU2VsZWN0IG9yIGRyb3AgZmlsZSIsIGZvbnRXZWlnaHQ6IDQwLCBsZXR0ZXJTcGFjaW5nOiAibm9ybWFsIgogIH07CiAgY29uc3QgYnVpbHRJbkZvbnRzID0gWwogICAgIlNhbnMgU2VyaWYiLCAiU2VyaWYiLCAiSGFuZHdyaXRpbmciLAogICAgIk1hcmtlciIsICJDdXJseSIsICJQaXhlbCIsICJTY3JhdGNoIiwgImluaGVyaXQiCiAgXTsKICBjb25zdCBBU19URVhUID0gInRleHQiLCBBU19EQVRBX1VSTCA9ICJ1cmwiLCBBU19IRVggPSAiaGV4IjsKICBjb25zdCBBU19CQVNFNjQgPSAiYmFzZTY0IiwgQVNfQlVGRkVSID0gImFycmF5QnVmZmVyIjsKCiAgY29uc3QgTU9ERV9NT0RBTCA9ICJtb2RhbCI7CiAgY29uc3QgTU9ERV9JTU1FRElBVEVMWV9TSE9XX1NFTEVDVE9SID0gInNlbGVjdG9yIjsKICBjb25zdCBNT0RFX09OTFlfU0VMRUNUT1IgPSAib25seS1zZWxlY3RvciI7CiAgY29uc3QgQUxMX01PREVTID0gW01PREVfTU9EQUwsIE1PREVfSU1NRURJQVRFTFlfU0hPV19TRUxFQ1RPUiwgTU9ERV9PTkxZX1NFTEVDVE9SXTsKICBsZXQgb3BlbkZpbGVTZWxlY3Rvck1vZGUgPSBNT0RFX01PREFMOwoKICBsZXQgc3RvcmVkRmlsZXMgPSB7fTsKICBsZXQgRmlsZU5hbWUgPSAiIiwgRmlsZVNpemUgPSAiMGtiIiwgUmF3RmlsZVNpemUgPSAiMCIsIGZpbGVEYXRlID0gIiIsIGxhc3REYXRhID0gIiI7CiAgbGV0IGVuYWJsZVZpcyA9IHRydWUsIG9wZW5Nb2RhbHMgPSAwOwoKICBjb25zdCBpc0NhbmNlbEV2ZW50U3VwcG9ydGVkID0gKGlucHV0KSA9PiB7CiAgICBpZiAoIm9uY2FuY2VsIiBpbiBpbnB1dCkgcmV0dXJuIHRydWU7CiAgICByZXR1cm4gbmF2aWdhdG9yLnVzZXJBZ2VudC5pbmNsdWRlcygiRmlyZWZveCIpOwogIH07CgogIGNvbnN0IGZvcm1hdEZpbGVTaXplID0gKHNpemUpID0+IHsKICAgIGNvbnN0IHVuaXRzID0gWyJCIiwgIktCIiwgIk1CIiwgIkdCIiwgIlRCIl07CiAgICBsZXQgaSA9IDA7CiAgICB3aGlsZSAoc2l6ZSA+PSAxMDI0ICYmIGkgPCB1bml0cy5sZW5ndGggLSAxKSB7CiAgICAgIHNpemUgLz0gMTAyNDsKICAgICAgaSsrOwogICAgfQogICAgcmV0dXJuIGAke3NpemUudG9GaXhlZCgyKX0gJHt1bml0c1tpXX1gOwogIH07CgogIGZ1bmN0aW9uIGJhc2U2NFRvSGV4KHN0ciwgZGVsaW0pIHsKICAgIGNvbnN0IHJhdyA9IGF0b2Ioc3RyKTsKICAgIGxldCByZXN1bHQgPSAiIjsKICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcmF3Lmxlbmd0aDsgaSsrKSB7CiAgICAgIGNvbnN0IGhleCA9IHJhdy5jaGFyQ29kZUF0KGkpLnRvU3RyaW5nKDE2KTsKICAgICAgcmVzdWx0ICs9IGRlbGltLnRvU3RyaW5nKCkgKyAoaGV4Lmxlbmd0aCA9PT0gMiA/IGhleCA6ICIwIiArIGhleCk7CiAgICB9CiAgICByZXR1cm4gcmVzdWx0LnRvVXBwZXJDYXNlKCk7CiAgfQoKICBmdW5jdGlvbiBidWZmZXJUb0Jhc2U2NChidWZmZXIpIHsKICAgIHZhciBiaW5hcnkgPSAiIjsKICAgIHZhciBieXRlcyA9IG5ldyBVaW50OEFycmF5KGJ1ZmZlcik7CiAgICB2YXIgbGVuID0gYnl0ZXMuYnl0ZUxlbmd0aDsKICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyBpKyspIHsgYmluYXJ5ICs9IFN0cmluZy5mcm9tQ2hhckNvZGUoIGJ5dGVzWyBpIF0gKSB9CiAgICByZXR1cm4gYnRvYShiaW5hcnkpOwogIH0KCiAgY29uc3Qgc2hvd0ZpbGVQcm9tcHQgPSBhc3luYyAoYWNjZXB0LCBhcywgb3ZlcnJpZGUpID0+IG5ldyBQcm9taXNlKGFzeW5jIChfcmVzb2x2ZSkgPT4gewogICAgb3Blbk1vZGFscysrOwogICAgY29uc3QgY2FsbGJhY2sgPSAodGV4dCkgPT4gewogICAgICBsZXQgZmluYWxUeHQgPSB0ZXh0OwogICAgICBpZiAob3ZlcnJpZGUgPT09IHVuZGVmaW5lZCkgewogICAgICAgIGlmIChbQVNfSEVYLCBBU19CQVNFNjRdLmluY2x1ZGVzKGFzKSkgewogICAgICAgICAgbGV0IHVyaSA9IGZpbmFsVHh0LnNwbGl0KCIsIik7CiAgICAgICAgICBmaW5hbFR4dCA9IHVyaS5zcGxpY2UoMSwgdXJpLmxlbmd0aCkuam9pbigiLCIpOwogICAgICAgICAgaWYgKGFzID09PSBBU19IRVgpIGZpbmFsVHh0ID0gYmFzZTY0VG9IZXgoZmluYWxUeHQsICIgIik7CiAgICAgICAgfQogICAgICAgIGxhc3REYXRhID0gZmluYWxUeHQ7CiAgICAgIH0KICAgICAgb3Blbk1vZGFscy0tOwogICAgICBfcmVzb2x2ZShmaW5hbFR4dCk7CiAgICAgIHZtLnJlbmRlcmVyLnJlbW92ZU92ZXJsYXkob3V0ZXIpOwogICAgICBydW50aW1lLm9mZigiUFJPSkVDVF9TVE9QX0FMTCIsIGhhbmRsZVByb2plY3RTdG9wcGVkKTsKICAgICAgZG9jdW1lbnQuYm9keS5yZW1vdmVFdmVudExpc3RlbmVyKCJrZXlkb3duIiwgaGFuZGxlS2V5RG93bik7CiAgICB9OwogICAgbGV0IGlzUmVhZGluZ0ZpbGUgPSBmYWxzZTsKICAgIGNvbnN0IHJlYWRGaWxlID0gKGZpbGUpID0+IHsKICAgICAgaWYgKGlzUmVhZGluZ0ZpbGUpIHJldHVybjsKICAgICAgaXNSZWFkaW5nRmlsZSA9IHRydWU7CiAgICAgIGNvbnN0IHJlYWRlciA9IG5ldyBGaWxlUmVhZGVyKCk7CiAgICAgIHJlYWRlci5vbmxvYWQgPSAoKSA9PiB7CiAgICAgICAgRmlsZU5hbWUgPSBmaWxlLm5hbWU7CiAgICAgICAgRmlsZVNpemUgPSBmb3JtYXRGaWxlU2l6ZShmaWxlLnNpemUpOwogICAgICAgIFJhd0ZpbGVTaXplID0gZmlsZS5zaXplOwogICAgICAgIGNvbnN0IHJhd0RhdGUgPSBuZXcgRGF0ZShmaWxlLmxhc3RNb2RpZmllZCk7CiAgICAgICAgZmlsZURhdGUgPSByYXdEYXRlLnRvTG9jYWxlU3RyaW5nKCk7CiAgICAgICAgY2FsbGJhY2socmVhZGVyLnJlc3VsdCk7CiAgICAgIH07CiAgICAgIHJlYWRlci5vbmVycm9yID0gKCkgPT4gewogICAgICAgIGNvbnNvbGUuZXJyb3IoIkZhaWxlZCB0byByZWFkIGZpbGUgYXMgdGV4dCIsIHJlYWRlci5lcnJvcik7CiAgICAgICAgY2FsbGJhY2soIiIpOwogICAgICB9OwogICAgICBpZiAob3ZlcnJpZGUgIT09IHVuZGVmaW5lZCkgY2FsbGJhY2soZmlsZSk7CiAgICAgIGVsc2UgaWYgKGFzID09PSBBU19URVhUKSByZWFkZXIucmVhZEFzVGV4dChmaWxlKTsKICAgICAgZWxzZSBpZiAoYXMgPT09IEFTX0JVRkZFUikgcmVhZGVyLnJlYWRBc0FycmF5QnVmZmVyKGZpbGUpOwogICAgICBlbHNlIHJlYWRlci5yZWFkQXNEYXRhVVJMKGZpbGUpOwogICAgfTsKICAgIGNvbnN0IGhhbmRsZUtleURvd24gPSAoZSkgPT4gewogICAgICBpZiAoZS5rZXkgPT09ICJFc2NhcGUiKSB7CiAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTsKICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7CiAgICAgICAgY2FsbGJhY2soIiIpOwogICAgICB9CiAgICB9OwogICAgZG9jdW1lbnQuYm9keS5yZW1vdmVFdmVudExpc3RlbmVyKCJrZXlkb3duIiwgaGFuZGxlS2V5RG93bik7CiAgICBkb2N1bWVudC5ib2R5LmFkZEV2ZW50TGlzdGVuZXIoImtleWRvd24iLCBoYW5kbGVLZXlEb3duLCB7IGNhcHR1cmU6IHRydWUgfSk7CiAgICBjb25zdCBoYW5kbGVQcm9qZWN0U3RvcHBlZCA9ICgpID0+IHsgY2FsbGJhY2soIiIpIH07CiAgICBydW50aW1lLm9uKCJQUk9KRUNUX1NUT1BfQUxMIiwgaGFuZGxlUHJvamVjdFN0b3BwZWQpOwogICAgY29uc3QgaGFuZGxlT3ZlcnJpZGUgPSBhc3luYyAoKSA9PiB7CiAgICAgIGxldCBmaWxlSW5mbzsKICAgICAgaWYgKG92ZXJyaWRlID09PSB1bmRlZmluZWQpIGlucHV0LmNsaWNrKCk7CiAgICAgIGVsc2UgewogICAgICAgIHRyeSB7CiAgICAgICAgICBpZiAob3ZlcnJpZGUgPT09ICJmb2xkZXIiKSB7CiAgICAgICAgICAgIGZpbGVJbmZvID0gYXdhaXQgd2luZG93LnNob3dEaXJlY3RvcnlQaWNrZXIoewogICAgICAgICAgICAgIG11bHRpcGxlOiBmYWxzZSwgdHlwZXM6IFt7IGFjY2VwdDogeyAiKi8qIiA6IFtdIH19XQogICAgICAgICAgICB9KTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGZpbGVJbmZvID0gYXdhaXQgd2luZG93LnNob3dPcGVuRmlsZVBpY2tlcih7CiAgICAgICAgICAgICAgbXVsdGlwbGU6IGZhbHNlLCB0eXBlczogW3sgYWNjZXB0OiB7ICIqLyoiIDogYWNjZXB0IH19XQogICAgICAgICAgICB9KTsKICAgICAgICAgIH0KICAgICAgICAgIGNhbGxiYWNrKGZpbGVJbmZvKTsKICAgICAgICB9IGNhdGNoIHsgY2FsbGJhY2soIiIpIH0KICAgICAgfQogICAgfTsKCiAgICBjb25zdCBJTklUSUFMX0JPUkRFUl9DT0xPUiA9IHNlbGVjdG9yT3B0aW9ucy5ib3JkZXI7CiAgICBjb25zdCBEUk9QUElOR19CT1JERVJfQ09MT1IgPSAiIzAzYTlmYyI7CiAgICBjb25zdCBvdXRlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpOwogICAgb3V0ZXIuc3R5bGUucG9pbnRlckV2ZW50cyA9ICJhdXRvIjsKICAgIG91dGVyLnN0eWxlLndpZHRoID0gIjEwMCUiOwogICAgb3V0ZXIuc3R5bGUuaGVpZ2h0ID0gIjEwMCUiOwogICAgb3V0ZXIuc3R5bGUuZGlzcGxheSA9ICJmbGV4IjsKICAgIG91dGVyLnN0eWxlLmFsaWduSXRlbXMgPSAiY2VudGVyIjsKICAgIG91dGVyLnN0eWxlLmp1c3RpZnlDb250ZW50ID0gImNlbnRlciI7CiAgICBvdXRlci5zdHlsZS5iYWNrZ3JvdW5kID0gYHJnYmEoMCwgMCwgMCwgJHtzZWxlY3Rvck9wdGlvbnMuc2hhZG93fSlgOwogICAgb3V0ZXIuc3R5bGUuY29sb3IgPSBzZWxlY3Rvck9wdGlvbnMudGV4dDsKICAgIG91dGVyLnN0eWxlLmNvbG9yU2NoZW1lID0gImxpZ2h0IjsKICAgIGlmIChvdmVycmlkZSA9PT0gdW5kZWZpbmVkKSB7CiAgICAgIG91dGVyLmFkZEV2ZW50TGlzdGVuZXIoImRyYWdvdmVyIiwgKGUpID0+IHsKICAgICAgICBpZiAoZS5kYXRhVHJhbnNmZXIudHlwZXMuaW5jbHVkZXMoIkZpbGVzIikpIHsKICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTsKICAgICAgICAgIGUuZGF0YVRyYW5zZmVyLmRyb3BFZmZlY3QgPSAiY29weSI7CiAgICAgICAgICBtb2RhbC5zdHlsZS5ib3JkZXJDb2xvciA9IERST1BQSU5HX0JPUkRFUl9DT0xPUjsKICAgICAgICB9CiAgICAgIH0pOwogICAgICBvdXRlci5hZGRFdmVudExpc3RlbmVyKCJkcmFnbGVhdmUiLCAoKSA9PiB7IG1vZGFsLnN0eWxlLmJvcmRlckNvbG9yID0gSU5JVElBTF9CT1JERVJfQ09MT1IgfSk7CiAgICAgIG91dGVyLmFkZEV2ZW50TGlzdGVuZXIoImRyb3AiLCAoZSkgPT4gewogICAgICAgIGNvbnN0IGZpbGUgPSBlLmRhdGFUcmFuc2Zlci5maWxlc1swXTsKICAgICAgICBpZiAoZmlsZSkgewogICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpOwogICAgICAgICAgcmVhZEZpbGUoZmlsZSk7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0KICAgIG91dGVyLmFkZEV2ZW50TGlzdGVuZXIoImNsaWNrIiwgKGUpID0+IHsgaWYgKGUudGFyZ2V0ID09PSBvdXRlcikgY2FsbGJhY2soIiIpIH0pOwoKICAgIGNvbnN0IG1vZGFsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiYnV0dG9uIik7CiAgICBtb2RhbC5zdHlsZS5ib3hTaGFkb3cgPSAiMCAwIDEwcHggLTVweCBjdXJyZW50Q29sb3IiOwogICAgbW9kYWwuc3R5bGUuY3Vyc29yID0gInBvaW50ZXIiOwogICAgbW9kYWwuc3R5bGUuZm9udCA9IHNlbGVjdG9yT3B0aW9ucy5mb250OwogICAgbW9kYWwuc3R5bGUuZm9udEZhbWlseSA9IHNlbGVjdG9yT3B0aW9ucy5mb250OwogICAgbW9kYWwuc3R5bGUuYmFja2dyb3VuZCA9IHNlbGVjdG9yT3B0aW9ucy5pbWFnZSA/IHNlbGVjdG9yT3B0aW9ucy5pbWFnZSA6IHNlbGVjdG9yT3B0aW9ucy5vdXRlcjsKICAgIG1vZGFsLnN0eWxlLmJhY2tncm91bmRTaXplID0gc2VsZWN0b3JPcHRpb25zLmltYWdlU2NhbGUgKyAiJSI7CiAgICBtb2RhbC5zdHlsZS5wYWRkaW5nID0gIjE2cHgiOwogICAgbW9kYWwuc3R5bGUuYm9yZGVyUmFkaXVzID0gYCR7c2VsZWN0b3JPcHRpb25zLmJvcmRlclJhZGl1c31weGA7CiAgICBtb2RhbC5zdHlsZS5ib3JkZXIgPSBgOHB4ICR7c2VsZWN0b3JPcHRpb25zLmJvcmRlclR5cGV9ICR7SU5JVElBTF9CT1JERVJfQ09MT1J9YDsKICAgIG1vZGFsLnN0eWxlLnBvc2l0aW9uID0gInJlbGF0aXZlIjsKICAgIG1vZGFsLnN0eWxlLnRleHRBbGlnbiA9ICJjZW50ZXIiOwogICAgbW9kYWwuYWRkRXZlbnRMaXN0ZW5lcigiY2xpY2siLCBhc3luYyAoKSA9PiB7IGF3YWl0IGhhbmRsZU92ZXJyaWRlKCkgfSk7CiAgICBtb2RhbC5mb2N1cygpOwogICAgb3V0ZXIuYXBwZW5kQ2hpbGQobW9kYWwpOwoKICAgIGNvbnN0IGlucHV0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiaW5wdXQiKTsKICAgIGlucHV0LnR5cGUgPSAiZmlsZSI7CiAgICBpbnB1dC5hY2NlcHQgPSBhY2NlcHQ7CiAgICBpZiAob3ZlcnJpZGUgPT09IHVuZGVmaW5lZCkgewogICAgICBpbnB1dC5hZGRFdmVudExpc3RlbmVyKCJjaGFuZ2UiLCAoZSkgPT4gewogICAgICAgIGNvbnN0IGZpbGUgPSBlLnRhcmdldC5maWxlc1swXTsKICAgICAgICBpZiAoZmlsZSkgcmVhZEZpbGUoZmlsZSk7CiAgICAgIH0pOwogICAgfQoKICAgIGNvbnN0IHRpdGxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7CiAgICB0aXRsZS50ZXh0Q29udGVudCA9IHNlbGVjdG9yT3B0aW9ucy50ZXh0VjsKICAgIHRpdGxlLnN0eWxlLmNvbG9yID0gc2VsZWN0b3JPcHRpb25zLnRleHQ7CiAgICB0aXRsZS5zdHlsZS5mb250U2l6ZSA9IGAke3NlbGVjdG9yT3B0aW9ucy5zaXplRm9udH1lbWA7CiAgICB0aXRsZS5zdHlsZS5mb250V2VpZ2h0ID0gIHNlbGVjdG9yT3B0aW9ucy5mb250V2VpZ2h0ICogOTsKICAgIHRpdGxlLnN0eWxlLmxldHRlclNwYWNpbmcgPSBgJHtzZWxlY3Rvck9wdGlvbnMubGV0dGVyU3BhY2luZ31weGA7CiAgICB0aXRsZS5zdHlsZS5tYXJnaW5Cb3R0b20gPSAiOHB4IjsKICAgIG1vZGFsLmFwcGVuZENoaWxkKHRpdGxlKTsKCiAgICBjb25zdCBzdWJ0aXRsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpOwogICAgc3VidGl0bGUudGV4dENvbnRlbnQgPSBgQWNjZXB0ZWQgRm9ybWF0czogJHthY2NlcHQgfHwgImFueSJ9YDsKICAgIHN1YnRpdGxlLnN0eWxlLmZvbnRTaXplID0gYCR7c2VsZWN0b3JPcHRpb25zLnNpemVGb250IC0gMC41fWVtYDsKICAgIHN1YnRpdGxlLnN0eWxlLmNvbG9yID0gc2VsZWN0b3JPcHRpb25zLnRleHQ7CiAgICBzdWJ0aXRsZS5zdHlsZS5mb250V2VpZ2h0ID0gIHNlbGVjdG9yT3B0aW9ucy5mb250V2VpZ2h0ICogOTsKICAgIHN1YnRpdGxlLnN0eWxlLmxldHRlclNwYWNpbmcgPSBgJHtzZWxlY3Rvck9wdGlvbnMubGV0dGVyU3BhY2luZ31weGA7CiAgICBtb2RhbC5hcHBlbmRDaGlsZChzdWJ0aXRsZSk7CiAgICBpZiAob3BlbkZpbGVTZWxlY3Rvck1vZGUgPT09IE1PREVfT05MWV9TRUxFQ1RPUiAmJiAhaXNDYW5jZWxFdmVudFN1cHBvcnRlZChpbnB1dCkpIHsKICAgICAgb3BlbkZpbGVTZWxlY3Rvck1vZGUgPSBNT0RFX0lNTUVESUFURUxZX1NIT1dfU0VMRUNUT1I7CiAgICB9CiAgICBpZiAob3BlbkZpbGVTZWxlY3Rvck1vZGUgIT09IE1PREVfT05MWV9TRUxFQ1RPUikgewogICAgICBjb25zdCBvdmVybGF5ID0gdm0ucmVuZGVyZXIuYWRkT3ZlcmxheShvdXRlciwgInNjYWxlIik7CiAgICAgIG92ZXJsYXkuY29udGFpbmVyLnN0eWxlLnpJbmRleCA9ICIxMDAiOwogICAgfQogICAgaWYgKAogICAgICBvcGVuRmlsZVNlbGVjdG9yTW9kZSA9PT0gTU9ERV9JTU1FRElBVEVMWV9TSE9XX1NFTEVDVE9SIHx8IG9wZW5GaWxlU2VsZWN0b3JNb2RlID09PSBNT0RFX09OTFlfU0VMRUNUT1IKICAgICkgewogICAgICBhd2FpdCBoYW5kbGVPdmVycmlkZSgpOwogICAgfQogICAgaWYgKG9wZW5GaWxlU2VsZWN0b3JNb2RlID09PSBNT0RFX09OTFlfU0VMRUNUT1IpIGlucHV0LmFkZEV2ZW50TGlzdGVuZXIoImNhbmNlbCIsICgpID0+IHsgY2FsbGJhY2soIiIpIH0pOwogIH0pOwoKICBjb25zdCBkb3dubG9hZFVSTCA9ICh1cmwsIGZpbGUpID0+IHsKICAgIGNvbnN0IGxpbmsgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJhIik7CiAgICBsaW5rLmhyZWYgPSB1cmw7CiAgICBsaW5rLmRvd25sb2FkID0gZmlsZTsKICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQobGluayk7CiAgICBsaW5rLmNsaWNrKCk7CiAgICBsaW5rLnJlbW92ZSgpOwogIH07CgogIGNvbnN0IGRvd25sb2FkQmxvYiA9IChibG9iLCBmaWxlKSA9PiB7CiAgICBjb25zdCB1cmwgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKGJsb2IpOwogICAgZG93bmxvYWRVUkwodXJsLCBmaWxlKTsKICAgIChyZXF1ZXN0SWRsZUNhbGxiYWNrID8/IHNldFRpbWVvdXQpKCgpID0+IFVSTC5yZXZva2VPYmplY3RVUkwodXJsKSk7CiAgfTsKCiAgY29uc3QgaXNEYXRhVVJMID0gKHVybCkgPT4gewogICAgdHJ5IHsKICAgICAgY29uc3QgcGFyc2VkID0gbmV3IFVSTCh1cmwpOwogICAgICByZXR1cm4gcGFyc2VkLnByb3RvY29sID09PSAiZGF0YToiOwogICAgfSBjYXRjaCB7IHJldHVybiBmYWxzZSB9CiAgfTsKCiAgY29uc3QgZG93bmxvYWRVbnRydXN0ZWRVUkwgPSAodXJsLCBmaWxlKSA9PiB7CiAgICBpZiAoaXNEYXRhVVJMKHVybCkpIGRvd25sb2FkVVJMKHVybCwgZmlsZSk7CiAgICBlbHNlIHJldHVybiBTY3JhdGNoLmZldGNoKHVybCkudGhlbigocmVzKSA9PiByZXMuYmxvYigpKS50aGVuKChibG9iKSA9PiB7IGRvd25sb2FkQmxvYihibG9iLCBmaWxlKSB9KTsKICB9OwoKICBjbGFzcyBmaWxlc0V4cGFuZGVkIHsKICAgIGNvbnN0cnVjdG9yKCkgewogICAgICB0aGlzLl9zaG93VW5zYWZlT3B0aW9ucyA9IGZhbHNlOwogICAgfQogICAgZ2V0SW5mbygpIHsKICAgICAgcmV0dXJuIHsKICAgICAgICBpZDogImZpbGVzRXhwYW5kZWQiLAogICAgICAgIG5hbWU6ICJGaWxlcyBFeHBhbmRlZCIsCiAgICAgICAgbWVudUljb25VUkksCiAgICAgICAgY29sb3IxOiAiI2ZjYjEwMyIsCiAgICAgICAgY29sb3IyOiAiI2RiOWEzNyIsCiAgICAgICAgY29sb3IzOiAiI2RiODkzNyIsCiAgICAgICAgYmxvY2tzOiBbCiAgICAgICAgICB7IGJsb2NrVHlwZTogU2NyYXRjaC5CbG9ja1R5cGUuTEFCRUwsIHRleHQ6ICJVcGxvYWRpbmciIH0sCiAgICAgICAgICB7CiAgICAgICAgICAgIG9wY29kZTogInNob3dQaWNrZXIiLCBibG9ja1R5cGU6IFNjcmF0Y2guQmxvY2tUeXBlLlJFUE9SVEVSLAogICAgICAgICAgICB0ZXh0OiAib3BlbiBhIGZpbGUiLCBoaWRlRnJvbVBhbGV0dGU6IHRydWUKICAgICAgICAgIH0sCiAgICAgICAgICB7CiAgICAgICAgICAgIG9wY29kZTogInNob3dQaWNrZXJFeHRlbnNpb25zIiwgYmxvY2tUeXBlOiBTY3JhdGNoLkJsb2NrVHlwZS5SRVBPUlRFUiwKICAgICAgICAgICAgdGV4dDogIm9wZW4gYSBbZXh0ZW5zaW9uXSBmaWxlIiwgaGlkZUZyb21QYWxldHRlOiB0cnVlLAogICAgICAgICAgICBhcmd1bWVudHM6IHsKICAgICAgICAgICAgICBleHRlbnNpb246IHsgdHlwZTogU2NyYXRjaC5Bcmd1bWVudFR5cGUuU1RSSU5HLCBkZWZhdWx0VmFsdWU6ICIudHh0IiB9CiAgICAgICAgICAgIH0KICAgICAgICAgIH0sCiAgICAgICAgICAvLyBCdWlsZGVyIEZ1bmN0aW9ucyBeCiAgICAgICAgICB7CiAgICAgICAgICAgIG9wY29kZTogInNob3dQaWNrZXJBcyIsCiAgICAgICAgICAgIGJsb2NrVHlwZTogU2NyYXRjaC5CbG9ja1R5cGUuUkVQT1JURVIsCiAgICAgICAgICAgIHRleHQ6ICJvcGVuIGEgZmlsZSBhcyBbYXNdIiwKICAgICAgICAgICAgYXJndW1lbnRzOiB7CiAgICAgICAgICAgICAgYXM6IHsgdHlwZTogU2NyYXRjaC5Bcmd1bWVudFR5cGUuU1RSSU5HLCBtZW51OiAiZW5jb2RpbmciIH0KICAgICAgICAgICAgfQogICAgICAgICAgfSwKICAgICAgICAgIHsKICAgICAgICAgICAgb3Bjb2RlOiAic2hvd1BpY2tlckV4dGVuc2lvbnNBcyIsCiAgICAgICAgICAgIGJsb2NrVHlwZTogU2NyYXRjaC5CbG9ja1R5cGUuUkVQT1JURVIsCiAgICAgICAgICAgIHRleHQ6ICJvcGVuIGEgW2V4dGVuc2lvbl0gZmlsZSBhcyBbYXNdIiwKICAgICAgICAgICAgYXJndW1lbnRzOiB7CiAgICAgICAgICAgICAgZXh0ZW5zaW9uOiB7IHR5cGU6IFNjcmF0Y2guQXJndW1lbnRUeXBlLlNUUklORywgZGVmYXVsdFZhbHVlOiAiLnR4dCIgfSwKICAgICAgICAgICAgICBhczogeyB0eXBlOiBTY3JhdGNoLkFyZ3VtZW50VHlwZS5TVFJJTkcsIG1lbnU6ICJlbmNvZGluZyIgfQogICAgICAgICAgICB9CiAgICAgICAgICB9LAogICAgICAgICAgeyBibG9ja1R5cGU6IFNjcmF0Y2guQmxvY2tUeXBlLkxBQkVMLCB0ZXh0OiAiRG93bmxvYWRpbmciIH0sCiAgICAgICAgICB7CiAgICAgICAgICAgIG9wY29kZTogImRvd25sb2FkIiwKICAgICAgICAgICAgYmxvY2tUeXBlOiBTY3JhdGNoLkJsb2NrVHlwZS5DT01NQU5ELAogICAgICAgICAgICB0ZXh0OiAiZG93bmxvYWQgW3RleHRdIGFzIFtmaWxlXSIsCiAgICAgICAgICAgIGFyZ3VtZW50czogewogICAgICAgICAgICAgIHRleHQ6IHsgdHlwZTogU2NyYXRjaC5Bcmd1bWVudFR5cGUuU1RSSU5HLCBkZWZhdWx0VmFsdWU6ICJIZWxsbywgd29ybGQhIiB9LAogICAgICAgICAgICAgIGZpbGU6IHsgdHlwZTogU2NyYXRjaC5Bcmd1bWVudFR5cGUuU1RSSU5HLCBkZWZhdWx0VmFsdWU6ICJzYXZlLnR4dCIgfQogICAgICAgICAgICB9CiAgICAgICAgICB9LAogICAgICAgICAgewogICAgICAgICAgICBvcGNvZGU6ICJkb3dubG9hZFVSTCIsCiAgICAgICAgICAgIGJsb2NrVHlwZTogU2NyYXRjaC5CbG9ja1R5cGUuQ09NTUFORCwKICAgICAgICAgICAgdGV4dDogImRvd25sb2FkIFVSTCBbdXJsXSBhcyBbZmlsZV0iLAogICAgICAgICAgICBhcmd1bWVudHM6IHsKICAgICAgICAgICAgICB1cmw6IHsgdHlwZTogU2NyYXRjaC5Bcmd1bWVudFR5cGUuU1RSSU5HLCBkZWZhdWx0VmFsdWU6ICJkYXRhOnRleHQvcGxhaW47YmFzZTY0LFNHVnNiRzhzSUhkdmNteGtJUT09IiB9LAogICAgICAgICAgICAgIGZpbGU6IHsgdHlwZTogU2NyYXRjaC5Bcmd1bWVudFR5cGUuU1RSSU5HLCBkZWZhdWx0VmFsdWU6ICJzYXZlLnR4dCIgfQogICAgICAgICAgICB9CiAgICAgICAgICB9LAogICAgICAgICAgeyBibG9ja1R5cGU6IFNjcmF0Y2guQmxvY2tUeXBlLkxBQkVMLCB0ZXh0OiAiRXh0cmEiIH0sCiAgICAgICAgICB7CiAgICAgICAgICAgIG9wY29kZTogInNldE9wZW5Nb2RlIiwKICAgICAgICAgICAgYmxvY2tUeXBlOiBTY3JhdGNoLkJsb2NrVHlwZS5DT01NQU5ELAogICAgICAgICAgICB0ZXh0OiAic2V0IG9wZW4gZmlsZSBzZWxlY3RvciBtb2RlIHRvIFttb2RlXSIsCiAgICAgICAgICAgIGFyZ3VtZW50czogewogICAgICAgICAgICAgIG1vZGU6IHsgdHlwZTogU2NyYXRjaC5Bcmd1bWVudFR5cGUuU1RSSU5HLCBtZW51OiAiYXV0b21hdGljYWxseU9wZW4iIH0KICAgICAgICAgICAgfQogICAgICAgICAgfSwKICAgICAgICAgIHsKICAgICAgICAgICAgb3Bjb2RlOiAiZmlsZUluZm8iLAogICAgICAgICAgICBibG9ja1R5cGU6IFNjcmF0Y2guQmxvY2tUeXBlLlJFUE9SVEVSLAogICAgICAgICAgICB0ZXh0OiAibGFzdCBvcGVuZWQgZmlsZSBbRk9STUFUXSIsCiAgICAgICAgICAgIGFyZ3VtZW50czogewogICAgICAgICAgICAgIEZPUk1BVDogeyB0eXBlOiBTY3JhdGNoLkFyZ3VtZW50VHlwZS5TVFJJTkcsIG1lbnU6ICJGSUxFX0lORk8iIH0KICAgICAgICAgICAgfQogICAgICAgICAgfSwKICAgICAgICAgICItLS0iLAogICAgICAgICAgewogICAgICAgICAgICBvcGNvZGU6ICJtb2RhbE9wZW4iLAogICAgICAgICAgICBibG9ja1R5cGU6IFNjcmF0Y2guQmxvY2tUeXBlLkJPT0xFQU4sCiAgICAgICAgICAgIHRleHQ6ICJpcyBtb2RhbCBvcGVuPyIKICAgICAgICAgIH0sCiAgICAgICAgICB7CgkgICAgb3Bjb2RlOiAiZmluZEZpbGVTaXplIiwKCSAgICBibG9ja1R5cGU6IFNjcmF0Y2guQmxvY2tUeXBlLlJFUE9SVEVSLAoJICAgIHRleHQ6ICJbVFlQRV0gZmlsZSBzaXplIG9mIFtGSUxFXSIsCgkgICAgYXJndW1lbnRzOiB7CgkgICAgICBUWVBFOiB7IHR5cGU6IFNjcmF0Y2guQXJndW1lbnRUeXBlLlNUUklORywgbWVudTogIkZJTEVfU0laRVMiIH0sCgkgICAgICBGSUxFOiB7IHR5cGU6IFNjcmF0Y2guQXJndW1lbnRUeXBlLlNUUklORywgZGVmYXVsdFZhbHVlOiAiSGVsbG8sIHdvcmxkISIgfQoJICAgIH0KCSAgfSwKCSAgeyBibG9ja1R5cGU6IFNjcmF0Y2guQmxvY2tUeXBlLkxBQkVMLCB0ZXh0OiAiU3RvcmVkIEZpbGVzIiB9LAogICAgICAgICAgewoJICAgIG9wY29kZTogImNoZWNrRmlsZUFQSSIsCgkgICAgYmxvY2tUeXBlOiBTY3JhdGNoLkJsb2NrVHlwZS5CT09MRUFOLAoJICAgIHRleHQ6ICJpcyBmaWxlIHdyaXRpbmcgc3VwcG9ydGVkPyIKCSAgfSwKCSAgewoJICAgIG9wY29kZTogImFsbFN0b3JlZCIsCgkgICAgYmxvY2tUeXBlOiBTY3JhdGNoLkJsb2NrVHlwZS5SRVBPUlRFUiwKCSAgICB0ZXh0OiAiYWxsIHN0b3JlZCBmaWxlcyIKCSAgfSwKCSAgewoJICAgIG9wY29kZTogInNldFN0b3JlZEZpbGUiLAoJICAgIGJsb2NrVHlwZTogU2NyYXRjaC5CbG9ja1R5cGUuQ09NTUFORCwKCSAgICB0ZXh0OiAib3BlbiBuZXcgc3RvcmVkIFtGSUxFXSBmaWxlIG5hbWVkIFtOQU1FXSBhcyBbVFlQRV0iLAoJICAgIGFyZ3VtZW50czogewoJICAgICAgTkFNRTogeyB0eXBlOiBTY3JhdGNoLkFyZ3VtZW50VHlwZS5TVFJJTkcsIGRlZmF1bHRWYWx1ZTogIm15LWZpbGUtMSIgfSwKCSAgICAgIEZJTEU6IHsgdHlwZTogU2NyYXRjaC5Bcmd1bWVudFR5cGUuU1RSSU5HLCBkZWZhdWx0VmFsdWU6ICIudHh0IiB9LAoJICAgICAgVFlQRTogeyB0eXBlOiBTY3JhdGNoLkFyZ3VtZW50VHlwZS5TVFJJTkcsIG1lbnU6ICJlbmNvZGluZyIgfQoJICAgIH0KCSAgfSwKCSAgewoJICAgIG9wY29kZTogInN0b3JlZEZvbGRlciIsCgkgICAgYmxvY2tUeXBlOiBTY3JhdGNoLkJsb2NrVHlwZS5DT01NQU5ELAoJICAgIHRleHQ6ICJvcGVuIGZvbGRlciBhbmQgc3RvcmUgZmlsZXMgYXMgW1RZUEVdIHdpdGggbmFtZSBbTkFNRV0iLAoJICAgIGFyZ3VtZW50czogewoJICAgICAgVFlQRTogeyB0eXBlOiBTY3JhdGNoLkFyZ3VtZW50VHlwZS5TVFJJTkcsIG1lbnU6ICJlbmNvZGluZyIgfSwKCSAgICAgIE5BTUU6IHsgdHlwZTogU2NyYXRjaC5Bcmd1bWVudFR5cGUuU1RSSU5HLCBkZWZhdWx0VmFsdWU6ICJteS1mb2xkZXItMSIgfQoJICAgIH0KCSAgfSwKCSAgewoJICAgIG9wY29kZTogImRlbGV0ZVN0b3JlZEZpbGUiLAoJICAgIGJsb2NrVHlwZTogU2NyYXRjaC5CbG9ja1R5cGUuQ09NTUFORCwKCSAgICB0ZXh0OiAiZGVsZXRlIGZpbGUgW05BTUVdIGZyb20gW09QVElPTl0iLAoJICAgIGFyZ3VtZW50czogewoJICAgICAgTkFNRTogeyB0eXBlOiBTY3JhdGNoLkFyZ3VtZW50VHlwZS5TVFJJTkcsIGRlZmF1bHRWYWx1ZTogIm15LWZpbGUtMSIgfSwKCSAgICAgIE9QVElPTjogeyB0eXBlOiBTY3JhdGNoLkFyZ3VtZW50VHlwZS5TVFJJTkcsIG1lbnU6ICJERUxFVElPTiIgfSwKCSAgICB9CgkgIH0sCgkgICItLS0iLAoJICB7CgkgICAgb3Bjb2RlOiAidXBkYXRlRmlsZSIsCgkgICAgYmxvY2tUeXBlOiBTY3JhdGNoLkJsb2NrVHlwZS5DT01NQU5ELAoJICAgIHRleHQ6ICJ3cml0ZSBbVFhUXSB0byBzdG9yZWQgZmlsZSBbTkFNRV0iLAoJICAgIGFyZ3VtZW50czogewoJICAgICAgVFhUOiB7IHR5cGU6IFNjcmF0Y2guQXJndW1lbnRUeXBlLlNUUklORywgZGVmYXVsdFZhbHVlOiAibmV3IGNvbnRlbnQiIH0sCgkgICAgICBOQU1FOiB7IHR5cGU6IFNjcmF0Y2guQXJndW1lbnRUeXBlLlNUUklORywgZGVmYXVsdFZhbHVlOiAibXktZmlsZS0xIiB9CgkgICAgfQoJICB9LAoJICB7CiAgICAgICAgICAgIG9wY29kZTogInN0b3JlZEluZm8iLAogICAgICAgICAgICBibG9ja1R5cGU6IFNjcmF0Y2guQmxvY2tUeXBlLlJFUE9SVEVSLAogICAgICAgICAgICB0ZXh0OiAiW0ZPUk1BVF0gaW4gc3RvcmVkIGZpbGUgW05BTUVdIiwKICAgICAgICAgICAgYXJndW1lbnRzOiB7CiAgICAgICAgICAgICAgRk9STUFUOiB7IHR5cGU6IFNjcmF0Y2guQXJndW1lbnRUeXBlLlNUUklORywgbWVudTogIkZJTEVfSU5GTyIgfSwKCSAgICAgIE5BTUU6IHsgdHlwZTogU2NyYXRjaC5Bcmd1bWVudFR5cGUuU1RSSU5HLCBkZWZhdWx0VmFsdWU6ICJteS1maWxlLTEiIH0KICAgICAgICAgICAgfQogICAgICAgICAgfSwKICAgICAgICAgICItLS0iLAoJICB7CgkgICAgb3Bjb2RlOiAibW92ZVN0b3JhZ2UiLAoJICAgIGJsb2NrVHlwZTogU2NyYXRjaC5CbG9ja1R5cGUuQ09NTUFORCwKCSAgICB0ZXh0OiAibWlncmF0ZSBmaWxlcyB0byBDU1QncyBaaXAgRXh0ZW5zaW9uIiwKCSAgfSwKCSAgeyBibG9ja1R5cGU6IFNjcmF0Y2guQmxvY2tUeXBlLkxBQkVMLCB0ZXh0OiAiVmlzdWFscyIgfSwKICAgICAgICAgIHsKICAgICAgICAgICAgZnVuYzogInRvZ2dsZVZpcyIsCiAgICAgICAgICAgIGJsb2NrVHlwZTogU2NyYXRjaC5CbG9ja1R5cGUuQlVUVE9OLAogICAgICAgICAgICB0ZXh0OiBgJHtlbmFibGVWaXMgPyAiRW4iIDogIkRpcyJ9YWJsZSBDdXN0b21pemF0aW9uYCwKICAgICAgICAgIH0sCiAgICAgICAgICB7CiAgICAgICAgICAgIG9wY29kZTogInJlc2V0U3R5bGUiLAogICAgICAgICAgICBibG9ja1R5cGU6IFNjcmF0Y2guQmxvY2tUeXBlLkNPTU1BTkQsCiAgICAgICAgICAgIHRleHQ6ICJyZXNldCBzZWxlY3RvciBzdHlsZSB0byBkZWZhdWx0IiwKICAgICAgICAgICAgaGlkZUZyb21QYWxldHRlOiBlbmFibGVWaXMKICAgICAgICAgIH0sCiAgICAgICAgICAiLS0tIiwKICAgICAgICAgIHsKICAgICAgICAgICAgb3Bjb2RlOiAiaW1hZ2VTZXQiLAogICAgICAgICAgICBibG9ja1R5cGU6IFNjcmF0Y2guQmxvY2tUeXBlLkNPTU1BTkQsCiAgICAgICAgICAgIHRleHQ6ICJzZXQgc2VsZWN0b3IgaW1hZ2UgdG8gW0lNR10iLAogICAgICAgICAgICBoaWRlRnJvbVBhbGV0dGU6IGVuYWJsZVZpcywKICAgICAgICAgICAgYXJndW1lbnRzOiB7CiAgICAgICAgICAgICAgSU1HOiB7IHR5cGU6IFNjcmF0Y2guQXJndW1lbnRUeXBlLlNUUklORywgZGVmYXVsdFZhbHVlOiAiaHR0cHM6Ly9leHRlbnNpb25zLnR1cmJvd2FycC5vcmcvZGFuZ28ucG5nIiB9CiAgICAgICAgICAgIH0KICAgICAgICAgIH0sCiAgICAgICAgICB7CiAgICAgICAgICAgIG9wY29kZTogInNjYWxlSW1hZ2UiLAogICAgICAgICAgICBibG9ja1R5cGU6IFNjcmF0Y2guQmxvY2tUeXBlLkNPTU1BTkQsCiAgICAgICAgICAgIHRleHQ6ICJzY2FsZSBzZWxlY3RvciBpbWFnZSB0byBbU0NBTEVdJSIsCiAgICAgICAgICAgIGhpZGVGcm9tUGFsZXR0ZTogZW5hYmxlVmlzLAogICAgICAgICAgICBhcmd1bWVudHM6IHsKICAgICAgICAgICAgICBTQ0FMRTogeyB0eXBlOiBTY3JhdGNoLkFyZ3VtZW50VHlwZS5OVU1CRVIsIGRlZmF1bHRWYWx1ZTogMTAwIH0KICAgICAgICAgICAgfQogICAgICAgICAgfSwKICAgICAgICAgICItLS0iLAogICAgICAgICAgewogICAgICAgICAgICBvcGNvZGU6ICJib3JkZXJDb2xvcnMiLAogICAgICAgICAgICBibG9ja1R5cGU6IFNjcmF0Y2guQmxvY2tUeXBlLkNPTU1BTkQsCiAgICAgICAgICAgIHRleHQ6ICJzZXQgc2VsZWN0b3IgW09QVElPTl0gY29sb3IgdG8gW0NPTE9SXSIsCiAgICAgICAgICAgIGhpZGVGcm9tUGFsZXR0ZTogZW5hYmxlVmlzLAogICAgICAgICAgICBhcmd1bWVudHM6IHsKICAgICAgICAgICAgICBPUFRJT046IHsgdHlwZTogU2NyYXRjaC5Bcmd1bWVudFR5cGUuU1RSSU5HLCBtZW51OiAidmlzdWFsQ29sb3JzIiB9LAogICAgICAgICAgICAgIENPTE9SOiB7IHR5cGU6IFNjcmF0Y2guQXJndW1lbnRUeXBlLkNPTE9SLCBkZWZhdWx0VmFsdWU6ICIjZmYwMDAwIiB9CiAgICAgICAgICAgIH0KICAgICAgICAgIH0sCiAgICAgICAgICB7CiAgICAgICAgICAgIG9wY29kZTogInZpc3VhbHNTZWxlY3QiLAogICAgICAgICAgICBibG9ja1R5cGU6IFNjcmF0Y2guQmxvY2tUeXBlLkNPTU1BTkQsCiAgICAgICAgICAgIHRleHQ6ICJzZXQgc2VsZWN0b3IgW09QVElPTl0gdG8gW0FNVF0iLAogICAgICAgICAgICBoaWRlRnJvbVBhbGV0dGU6IGVuYWJsZVZpcywKICAgICAgICAgICAgYXJndW1lbnRzOiB7CiAgICAgICAgICAgICAgT1BUSU9OOiB7IHR5cGU6IFNjcmF0Y2guQXJndW1lbnRUeXBlLlNUUklORywgbWVudTogInZpc3VhbE9wdGlvbnMiIH0sCiAgICAgICAgICAgICAgQU1UOiB7IHR5cGU6IFNjcmF0Y2guQXJndW1lbnRUeXBlLk5VTUJFUiwgZGVmYXVsdFZhbHVlOiAxNSB9CiAgICAgICAgICAgIH0KICAgICAgICAgIH0sCiAgICAgICAgICB7CiAgICAgICAgICAgIG9wY29kZTogImJvcmRlclR5cGVTZXQiLAogICAgICAgICAgICBibG9ja1R5cGU6IFNjcmF0Y2guQmxvY2tUeXBlLkNPTU1BTkQsCiAgICAgICAgICAgIHRleHQ6ICJzZXQgc2VsZWN0b3IgYm9yZGVyIHR5cGUgdG8gW1RZUEVdIiwKICAgICAgICAgICAgaGlkZUZyb21QYWxldHRlOiBlbmFibGVWaXMsCiAgICAgICAgICAgIGFyZ3VtZW50czogewogICAgICAgICAgICAgIFRZUEU6IHsgdHlwZTogU2NyYXRjaC5Bcmd1bWVudFR5cGUuU1RSSU5HLCBtZW51OiAiYm9yZGVyVHlwZXMiIH0KICAgICAgICAgICAgfQogICAgICAgICAgfSwKICAgICAgICAgIHsKICAgICAgICAgICAgb3Bjb2RlOiAiZm9udFNldCIsCiAgICAgICAgICAgIGJsb2NrVHlwZTogU2NyYXRjaC5CbG9ja1R5cGUuQ09NTUFORCwKICAgICAgICAgICAgdGV4dDogInNldCBzZWxlY3RvciBmb250IHRvIFtGT05UXSIsCiAgICAgICAgICAgIGhpZGVGcm9tUGFsZXR0ZTogZW5hYmxlVmlzLAogICAgICAgICAgICBhcmd1bWVudHM6IHsKICAgICAgICAgICAgICBGT05UOiB7IHR5cGU6IFNjcmF0Y2guQXJndW1lbnRUeXBlLlNUUklORywgbWVudTogImZvbnQiIH0KICAgICAgICAgICAgfQogICAgICAgICAgfSwKICAgICAgICAgIHsKICAgICAgICAgICAgb3Bjb2RlOiAidGV4dFNldCIsCiAgICAgICAgICAgIGJsb2NrVHlwZTogU2NyYXRjaC5CbG9ja1R5cGUuQ09NTUFORCwKICAgICAgICAgICAgdGV4dDogInNldCBmaWxlIHNlbGVjdG9yIHRleHQgdG8gW1RFWFRdIiwKICAgICAgICAgICAgaGlkZUZyb21QYWxldHRlOiBlbmFibGVWaXMsCiAgICAgICAgICAgIGFyZ3VtZW50czogewogICAgICAgICAgICAgIFRFWFQ6IHsgdHlwZTogU2NyYXRjaC5Bcmd1bWVudFR5cGUuU1RSSU5HLCBkZWZhdWx0VmFsdWU6ICJJbnNlcnQgRmlsZSBIZXJlIiB9CiAgICAgICAgICAgIH0KICAgICAgICAgIH0sCiAgICAgICAgICB7CiAgICAgICAgICAgIG9wY29kZTogImN1cnJlbnRYIiwKICAgICAgICAgICAgYmxvY2tUeXBlOiBTY3JhdGNoLkJsb2NrVHlwZS5SRVBPUlRFUiwKICAgICAgICAgICAgdGV4dDogImN1cnJlbnQgc2VsZWN0b3IgW1RISU5HXSIsCiAgICAgICAgICAgIGhpZGVGcm9tUGFsZXR0ZTogZW5hYmxlVmlzLAogICAgICAgICAgICBhcmd1bWVudHM6IHsKICAgICAgICAgICAgICBUSElORzogeyB0eXBlOiBTY3JhdGNoLkFyZ3VtZW50VHlwZS5TVFJJTkcsIG1lbnU6ICJhbGwiIH0KICAgICAgICAgICAgfQogICAgICAgICAgfSwKICAgICAgICBdLAogICAgICAgIG1lbnVzOiB7CiAgICAgICAgICBmb250OiB7IGFjY2VwdFJlcG9ydGVyczogdHJ1ZSwgaXRlbXM6ICJnZXRGb250cyIgfSwKICAgICAgICAgIGVuY29kaW5nOiB7IGFjY2VwdFJlcG9ydGVyczogdHJ1ZSwgaXRlbXM6ICJnZXRFbmNvZGluZ3MiIH0sCiAgICAgICAgICBhdXRvbWF0aWNhbGx5T3BlbjogewogICAgICAgICAgICBhY2NlcHRSZXBvcnRlcnM6IHRydWUsCiAgICAgICAgICAgIGl0ZW1zOiBbCiAgICAgICAgICAgICAgeyB0ZXh0OiAic2hvdyBtb2RhbCIsIHZhbHVlOiBNT0RFX01PREFMIH0sCiAgICAgICAgICAgICAgeyB0ZXh0OiAib3BlbiBzZWxlY3RvciBpbW1lZGlhdGVseSIsIHZhbHVlOiBNT0RFX0lNTUVESUFURUxZX1NIT1dfU0VMRUNUT1IgfSwKICAgICAgICAgICAgICB7IHRleHQ6ICJvbmx5IHNob3cgc2VsZWN0b3IgKHVucmVsaWFibGUpIiwgdmFsdWU6IE1PREVfT05MWV9TRUxFQ1RPUiB9CiAgICAgICAgICAgIF0sCiAgICAgICAgICB9LAogICAgICAgICAgYWxsOiB7CiAgICAgICAgICAgIGFjY2VwdFJlcG9ydGVyczogdHJ1ZSwKICAgICAgICAgICAgaXRlbXM6IFsKICAgICAgICAgICAgICB7IHRleHQ6ICJib3JkZXIgY29sb3IiLCB2YWx1ZTogImJvcmRlciIgfSwKICAgICAgICAgICAgICB7IHRleHQ6ICJ0ZXh0IGNvbG9yIiwgdmFsdWU6ICJ0ZXh0IiB9LAogICAgICAgICAgICAgIHsgdGV4dDogImJhY2tncm91bmQgY29sb3IiLCB2YWx1ZTogIm91dGVyIiB9LAogICAgICAgICAgICAgIHsgdGV4dDogInNoYWRvdyBpbnRlbnNpdHkiLCB2YWx1ZTogInNoYWRvdyIgfSwKICAgICAgICAgICAgICB7IHRleHQ6ICJmb250IiwgdmFsdWU6ICJmb250IiB9LAogICAgICAgICAgICAgIHsgdGV4dDogImZvbnQgc2l6ZSIsIHZhbHVlOiAic2l6ZUZvbnQiIH0sCiAgICAgICAgICAgICAgeyB0ZXh0OiAiZm9udCB0aGlja25lc3MiLCB2YWx1ZTogImZvbnRXZWlnaHQiIH0sCiAgICAgICAgICAgICAgeyB0ZXh0OiAibGV0dGVyIHNwYWNpbmciLCB2YWx1ZTogImxldHRlclNwYWNpbmciIH0sCiAgICAgICAgICAgICAgeyB0ZXh0OiAiYm9yZGVyIHJhZGl1cyIsIHZhbHVlOiAiYm9yZGVyUmFkaXVzIiB9LAogICAgICAgICAgICAgIHsgdGV4dDogImJvcmRlciB0eXBlIiwgdmFsdWU6ICJib3JkZXJUeXBlIiB9LAogICAgICAgICAgICAgIHsgdGV4dDogImJhY2tncm91bmQgaW1hZ2UiLCB2YWx1ZTogImltYWdlIiB9LAogICAgICAgICAgICAgIHsgdGV4dDogInRleHQiLCB2YWx1ZTogInRleHRWIiB9CiAgICAgICAgICAgIF0sCiAgICAgICAgICB9LAogICAgICAgICAgRklMRV9TSVpFUzogewogICAgICAgICAgICBhY2NlcHRSZXBvcnRlcnM6IHRydWUsCiAgICAgICAgICAgIGl0ZW1zOiBbImZvcm1hdHRlZCIsICJ1bmZvcm1hdHRlZCJdLAogICAgICAgICAgfSwKICAgICAgICAgIEZJTEVfSU5GTzogewogICAgICAgICAgICBhY2NlcHRSZXBvcnRlcnM6IHRydWUsCiAgICAgICAgICAgIGl0ZW1zOiBbImRhdGEiLCAibmFtZSIsICJtb2RpZmllZCBkYXRlIiwgInNpemUgZm9ybWF0dGVkIiwgInNpemUgdW5mb3JtYXR0ZWQiXSwKICAgICAgICAgIH0sCiAgICAgICAgICBERUxFVElPTjogewogICAgICAgICAgICBhY2NlcHRSZXBvcnRlcnM6IHRydWUsCiAgICAgICAgICAgIGl0ZW1zOiBbInN0b3JhZ2UiLCAidGhpcyBkZXZpY2UiLCAiYm90aCJdLAogICAgICAgICAgfSwKICAgICAgICAgIHZpc3VhbENvbG9yczogewogICAgICAgICAgICBhY2NlcHRSZXBvcnRlcnM6IHRydWUsCiAgICAgICAgICAgIGl0ZW1zOiBbImJvcmRlciIsICJ0ZXh0IiwgImJhY2tncm91bmQiXSwKICAgICAgICAgIH0sCiAgICAgICAgICB2aXN1YWxPcHRpb25zOiB7CiAgICAgICAgICAgIGFjY2VwdFJlcG9ydGVyczogdHJ1ZSwKICAgICAgICAgICAgaXRlbXM6IFsiZm9udCBzaXplIiwgImZvbnQgdGhpY2tuZXNzIiwgImxldHRlciBzcGFjaW5nIiwgImJvcmRlciByYWRpdXMiLCAic2hhZG93IGludGVuc2l0eSJdLAogICAgICAgICAgfSwKICAgICAgICAgIGJvcmRlclR5cGVzOiB7CiAgICAgICAgICAgIGFjY2VwdFJlcG9ydGVyczogdHJ1ZSwKICAgICAgICAgICAgaXRlbXM6IFsKICAgICAgICAgICAgICAiZG90dGVkIiwgImRhc2hlZCIsICJzb2xpZCIsICJkb3VibGUiLCAKICAgICAgICAgICAgICAiZ3Jvb3ZlIiwgInJpZGdlIiwgImluc2V0IiwgIm91dHNldCIsICJub25lIgogICAgICAgICAgICBdLAogICAgICAgICAgfSwKICAgICAgICB9LAogICAgICB9OwogICAgfQoKICAgIC8vIEhlbHBlciBGdW5jcwogICAgZ2V0Rm9udHMoKSB7CiAgICAgIGNvbnN0IGN1c3RvbUZvbnRzID0gcnVudGltZS5mb250TWFuYWdlciA/IHJ1bnRpbWUuZm9udE1hbmFnZXIuZ2V0Rm9udHMoKS5tYXAoKGkpID0+ICh7IHRleHQ6IGkubmFtZSwgdmFsdWU6IGkuZmFtaWx5IH0pKSA6IFtdOwogICAgICByZXR1cm4gWyAuLi5idWlsdEluRm9udHMsIC4uLmN1c3RvbUZvbnRzIF07CiAgICB9CgogICAgZ2V0RW5jb2RpbmdzKG9ubHlTYWZlKSB7CiAgICAgIGNvbnN0IHR5cGVzID0gWwogICAgICAgIHsgdGV4dDogInRleHQiLCB2YWx1ZTogQVNfVEVYVCB9LCB7IHRleHQ6ICJkYXRhOiBVUkwiLCB2YWx1ZTogQVNfREFUQV9VUkwgfSwKICAgICAgICB7IHRleHQ6ICJiYXNlNjQiLCB2YWx1ZTogQVNfQkFTRTY0IH0sIHsgdGV4dDogImhleCIsIHZhbHVlOiBBU19IRVggfQogICAgICBdOwogICAgICBpZiAodGhpcy5fc2hvd1Vuc2FmZU9wdGlvbnMpIHR5cGVzLnB1c2goeyB0ZXh0OiAiYXJyYXlCdWZmZXIiLCB2YWx1ZTogQVNfQlVGRkVSIH0pOwogICAgICByZXR1cm4gdHlwZXM7CiAgICB9CgogICAgdG9nZ2xlVmlzKCkgeyBlbmFibGVWaXMgPSBlbmFibGVWaXMgPyBmYWxzZSA6IHRydWUsIHZtLmV4dGVuc2lvbk1hbmFnZXIucmVmcmVzaEJsb2NrcygpIH0KCiAgICBzaG93UGlja2VyKCkgeyByZXR1cm4gc2hvd0ZpbGVQcm9tcHQoIiIsIEFTX1RFWFQpIH0KCiAgICBzaG93UGlja2VyRXh0ZW5zaW9ucyhhcmdzKSB7IHJldHVybiBzaG93RmlsZVByb21wdChhcmdzLmV4dGVuc2lvbiwgQVNfVEVYVCkgfQoKICAgIHVwZGF0ZVN0b3JlKG5hbWUsIGRhdGEsIG1ldGFEYXRhKSB7CiAgICAgIGNvbnN0IHJhd0RhdGUgPSBuZXcgRGF0ZShtZXRhRGF0YS5sYXN0TW9kaWZpZWQpOwogICAgICBzdG9yZWRGaWxlc1tuYW1lXS5kYXRhID0gewogICAgICAgIHNpemU6IG1ldGFEYXRhLnNpemUsIHNpemVGb3JtYXQ6IGZvcm1hdEZpbGVTaXplKG1ldGFEYXRhLnNpemUpLAogICAgICAgIGRhdGVGb3JtYXQ6IHJhd0RhdGUudG9Mb2NhbGVTdHJpbmcoKSwgZGF0YQogICAgICB9OwogICAgfQoKICAgIGFzeW5jIGVuY29kZURhdGEobWV0YSwgZm9ybWF0KSB7CiAgICAgIGNvbnN0IHRleHQgPSBhd2FpdCBtZXRhLnRleHQoKTsKICAgICAgY29uc3QgYnVmZmVyID0gYXdhaXQgbWV0YS5hcnJheUJ1ZmZlcigpOwogICAgICBpZiAoZm9ybWF0ID09PSBBU19URVhUKSByZXR1cm4gdGV4dDsKICAgICAgZWxzZSBpZiAoZm9ybWF0ID09PSBBU19CVUZGRVIpIHJldHVybiBidWZmZXI7CiAgICAgIGNvbnN0IGJhc2U2NCA9IGJ1ZmZlclRvQmFzZTY0KGJ1ZmZlcik7CiAgICAgIGlmIChmb3JtYXQgPT09IEFTX0JBU0U2NCkgcmV0dXJuIGJhc2U2NDsKICAgICAgZWxzZSBpZiAoZm9ybWF0ID09PSBBU19EQVRBX1VSTCkgcmV0dXJuIGBkYXRhOiR7bWV0YS50eXBlfTtjaGFyc2V0PXV0Zi04O2Jhc2U2NCwke2Jhc2U2NH1gOwogICAgICBlbHNlIGlmIChmb3JtYXQgPT09IEFTX0hFWCkgcmV0dXJuIGJhc2U2NFRvSGV4KGJhc2U2NCwgIiAiKTsKICAgICAgcmV0dXJuIHRleHQ7CiAgICB9CgogICAgLy8gQmxvY2sgRnVuY3MgKFVwbG9hZCAmIERvd25sb2FkKQogICAgc2hvd1BpY2tlckFzKGFyZ3MpIHsgcmV0dXJuIHNob3dGaWxlUHJvbXB0KCIiLCBhcmdzLmFzKSB9CgogICAgc2hvd1BpY2tlckV4dGVuc2lvbnNBcyhhcmdzKSB7IHJldHVybiBzaG93RmlsZVByb21wdChhcmdzLmV4dGVuc2lvbiwgYXJncy5hcykgfQoKICAgIGRvd25sb2FkKGFyZ3MpIHsKICAgICAgZG93bmxvYWRCbG9iKG5ldyBCbG9iKFtTY3JhdGNoLkNhc3QudG9TdHJpbmcoYXJncy50ZXh0KV0pLCBTY3JhdGNoLkNhc3QudG9TdHJpbmcoYXJncy5maWxlKSk7CiAgICB9CgogICAgZG93bmxvYWRVUkwoYXJncykgewogICAgICByZXR1cm4gZG93bmxvYWRVbnRydXN0ZWRVUkwoU2NyYXRjaC5DYXN0LnRvU3RyaW5nKGFyZ3MudXJsKSwgU2NyYXRjaC5DYXN0LnRvU3RyaW5nKGFyZ3MuZmlsZSkpOwogICAgfQoKICAgIHNldE9wZW5Nb2RlKGFyZ3MpIHsgaWYgKEFMTF9NT0RFUy5pbmNsdWRlcyhhcmdzLm1vZGUpKSBvcGVuRmlsZVNlbGVjdG9yTW9kZSA9IGFyZ3MubW9kZSB9CgogICAgZmlsZUluZm8oYXJncykgewogICAgICBpZiAoYXJncy5GT1JNQVQgPT09ICJzaXplIGZvcm1hdHRlZCIpIHJldHVybiBGaWxlU2l6ZTsKICAgICAgZWxzZSBpZiAoYXJncy5GT1JNQVQgPT09ICJzaXplIHVuZm9ybWF0dGVkIikgcmV0dXJuIFJhd0ZpbGVTaXplOwogICAgICBlbHNlIGlmIChhcmdzLkZPUk1BVCA9PT0gIm1vZGlmaWVkIGRhdGUiKSByZXR1cm4gZmlsZURhdGU7CiAgICAgIGVsc2UgaWYgKGFyZ3MuRk9STUFUID09PSAiZGF0YSIpIHJldHVybiBsYXN0RGF0YTsKICAgICAgcmV0dXJuIEZpbGVOYW1lOwogICAgfQoKICAgIG1vZGFsT3BlbigpIHsgcmV0dXJuIG9wZW5Nb2RhbHMgIT09IDAgfQoKICAgIC8vIEZpbGUgV3JpdGluZyAmIEZvbGRlcnMKICAgIGNoZWNrRmlsZUFQSSgpIHsgcmV0dXJuICJzaG93T3BlbkZpbGVQaWNrZXIiIGluIHdpbmRvdyB9CgogICAgYWxsU3RvcmVkKCkgeyByZXR1cm4gSlNPTi5zdHJpbmdpZnkoT2JqZWN0LmtleXMoc3RvcmVkRmlsZXMpKSB9CgogICAgYXN5bmMgc2V0U3RvcmVkRmlsZShhcmdzKSB7CiAgICAgIGlmICghdGhpcy5jaGVja0ZpbGVBUEkoKSkgcmV0dXJuOwogICAgICBsZXQgZmlsZVR5cGVzID0gYXJncy5GSUxFID8gYXJncy5GSUxFLnNwbGl0KCIgIikgOiBbXTsKICAgICAgdHJ5IHsKCWNvbnN0IHBpY2tlciA9IGF3YWl0IHNob3dGaWxlUHJvbXB0KGZpbGVUeXBlcywgIiIsICJ3aW5kb3ciKTsKCWlmICghcGlja2VyKSByZXR1cm47CiAgICAgICAgc3RvcmVkRmlsZXNbYXJncy5OQU1FXSA9IHsgZmlsZTogcGlja2VyWzBdLCBkYXRhOiB7fSB9OwoJY29uc3QgbWV0YURhdGEgPSBhd2FpdCBwaWNrZXJbMF0uZ2V0RmlsZSgpOwoJY29uc3QgZW5jb2RlZERhdGEgPSBhd2FpdCB0aGlzLmVuY29kZURhdGEobWV0YURhdGEsIGFyZ3MuVFlQRSk7Cgl0aGlzLnVwZGF0ZVN0b3JlKGFyZ3MuTkFNRSwgZW5jb2RlZERhdGEsIG1ldGFEYXRhKTsKICAgICAgfSBjYXRjaChlKSB7IGNvbnNvbGUud2FybihlKSB9CiAgICB9CgogICAgYXN5bmMgc3RvcmVkRm9sZGVyKGFyZ3MpIHsKICAgICAgaWYgKCF0aGlzLmNoZWNrRmlsZUFQSSgpKSByZXR1cm47CiAgICAgIHRyeSB7Cgljb25zdCBwaWNrZXIgPSBhd2FpdCBzaG93RmlsZVByb21wdCgiRm9sZGVyIiwgIiIsICJmb2xkZXIiKTsKICAgICAgICBpZiAoIXBpY2tlcikgcmV0dXJuOwogICAgICAgIGNvbnN0IGVudHJpZXMgPSBwaWNrZXIuZW50cmllcygpOwogICAgICAgIGNvbnN0IGZvbGRlck4gPSBhcmdzLk5BTUUgPyBhcmdzLk5BTUUgOiBwaWNrZXIubmFtZTsKICAgICAgICBsZXQgdGhpc0ZpbGUgPSAiIjsKICAgICAgICB3aGlsZSAodGhpc0ZpbGUgIT09IHVuZGVmaW5lZCkgewogICAgICAgICAgY29uc3Qgb3V0ZXJEYXRhID0gYXdhaXQgZW50cmllcy5uZXh0KCk7CiAgICAgICAgICB0aGlzRmlsZSA9IG91dGVyRGF0YS52YWx1ZTsKICAgICAgICAgIGlmICh0aGlzRmlsZSAhPT0gdW5kZWZpbmVkKSB7CiAgICAgICAgICAgIGNvbnN0IGlubmVyRGF0YSA9IHRoaXNGaWxlWzFdOwogICAgICAgICAgICBjb25zdCBuYW1lID0gYCR7Zm9sZGVyTn0vJHtpbm5lckRhdGEubmFtZX1gOwogICAgICAgICAgICBzdG9yZWRGaWxlc1tuYW1lXSA9IHsgZmlsZTogaW5uZXJEYXRhLCBkYXRhOiB7fSB9OwoJICAgIGNvbnN0IG1ldGFEYXRhID0gYXdhaXQgaW5uZXJEYXRhLmdldEZpbGUoKTsKCSAgICBjb25zdCBlbmNvZGVkRGF0YSA9IGF3YWl0IHRoaXMuZW5jb2RlRGF0YShtZXRhRGF0YSwgYXJncy5UWVBFKTsKCSAgICB0aGlzLnVwZGF0ZVN0b3JlKG5hbWUsIGVuY29kZWREYXRhLCBtZXRhRGF0YSk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9IGNhdGNoKGUpIHsgY29uc29sZS53YXJuKGUpIH0KICAgIH0KCiAgICBkZWxldGVTdG9yZWRGaWxlKGFyZ3MpIHsKICAgICAgaWYgKGFyZ3MuT1BUSU9OID09PSAidGhpcyBkZXZpY2UiIHx8IGFyZ3MuT1BUSU9OID09PSAiYm90aCIpIHsKICAgICAgICBpZiAoIXRoaXMuY2hlY2tGaWxlQVBJKCkgfHwgc3RvcmVkRmlsZXNbYXJncy5OQU1FXSA9PT0gdW5kZWZpbmVkKSByZXR1cm47CiAgICAgICAgc3RvcmVkRmlsZXNbYXJncy5OQU1FXS5maWxlLnJlbW92ZSgpOwogICAgICB9CiAgICAgIGlmIChhcmdzLk9QVElPTiA9PT0gInN0b3JhZ2UiIHx8IGFyZ3MuT1BUSU9OID09PSAiYm90aCIpIGRlbGV0ZSBzdG9yZWRGaWxlc1thcmdzLk5BTUVdCiAgICB9CgogICAgYXN5bmMgdXBkYXRlRmlsZShhcmdzKSB7CiAgICAgIGlmICghdGhpcy5jaGVja0ZpbGVBUEkoKSB8fCBzdG9yZWRGaWxlc1thcmdzLk5BTUVdID09PSB1bmRlZmluZWQpIHJldHVybjsKICAgICAgdHJ5IHsKCWNvbnN0IHdyaXRhYmxlID0gYXdhaXQgc3RvcmVkRmlsZXNbYXJncy5OQU1FXS5maWxlLmNyZWF0ZVdyaXRhYmxlKCk7Cglhd2FpdCB3cml0YWJsZS53cml0ZShhcmdzLlRYVCk7Cglhd2FpdCB3cml0YWJsZS5jbG9zZSgpOwoJdGhpcy51cGRhdGVTdG9yZShhcmdzLk5BTUUsIGFyZ3MuVFhULCB7IGxhc3RNb2RpZmllZDogRGF0ZS5ub3coKSwgc2l6ZTogYXJncy5UWFQubGVuZ3RoIH0pOwogICAgICB9IGNhdGNoIChlKSB7CWNvbnNvbGUud2FybihlKSB9CiAgICB9CgogICAgc3RvcmVkSW5mbyhhcmdzKSB7CiAgICAgIGNvbnN0IGZpbGVJbmZvID0gc3RvcmVkRmlsZXNbYXJncy5OQU1FXTsKICAgICAgaWYgKGZpbGVJbmZvID09PSB1bmRlZmluZWQpIHJldHVybiAiIjsKICAgICAgZWxzZSBpZiAoYXJncy5GT1JNQVQgPT09ICJzaXplIGZvcm1hdHRlZCIpIHJldHVybiBmaWxlSW5mby5kYXRhLnNpemVGb3JtYXQ7CiAgICAgIGVsc2UgaWYgKGFyZ3MuRk9STUFUID09PSAic2l6ZSB1bmZvcm1hdHRlZCIpIHJldHVybiBmaWxlSW5mby5kYXRhLnNpemU7CiAgICAgIGVsc2UgaWYgKGFyZ3MuRk9STUFUID09PSAibW9kaWZpZWQgZGF0ZSIpIHJldHVybiBmaWxlSW5mby5kYXRhLmRhdGVGb3JtYXQ7CiAgICAgIGVsc2UgaWYgKGFyZ3MuRk9STUFUID09PSAiZGF0YSIpIHJldHVybiBmaWxlSW5mby5kYXRhLmRhdGE7CiAgICAgIHJldHVybiBmaWxlSW5mby5maWxlLm5hbWU7CiAgICB9CgogICAgbW92ZVN0b3JhZ2UoKSB7CiAgICAgIGNvbnN0IGV4dCA9IHJ1bnRpbWUuZXh0X2NzdDEyMjl6aXA7CiAgICAgIGlmIChleHQgPT09IHVuZGVmaW5lZCkgcmV0dXJuOwogICAgICBleHQuY3JlYXRlRW1wdHlBcyh7IE5BTUU6ICJmaWxlc0V4cGFuZGVkX3N0b3JlZEZpbGVzIiB9KTsKICAgICAgaWYgKGV4dC56aXBFcnJvcikgcmV0dXJuOwogICAgICBjb25zdCB6aXAgPSBleHQuemlwc1siZmlsZXNFeHBhbmRlZF9zdG9yZWRGaWxlcyJdOwogICAgICBmb3IgKGNvbnN0IFtuYW1lLCBmaWxlXSBvZiBPYmplY3QuZW50cmllcyhzdG9yZWRGaWxlcykpIHsgemlwLmZpbGUobmFtZSwgZmlsZS5kYXRhLmRhdGEpIH0KICAgIH0KCiAgICAvLyBFeHRyYQogICAgZmluZEZpbGVTaXplKGFyZ3MpIHsKICAgICAgY29uc3Qgc2l6ZSA9IGFyZ3MuRklMRS5sZW5ndGg7IC8vIGJ5dGVzCiAgICAgIGlmIChhcmdzLlRZUEUgPT09ICJmb3JtYXR0ZWQiKSByZXR1cm4gZm9ybWF0RmlsZVNpemUoc2l6ZSk7CiAgICAgIHJldHVybiBzaXplOwogICAgfQoKICAgIC8vIFZpc3VhbHMKICAgIHJlc2V0U3R5bGUoKSB7CiAgICAgIHNlbGVjdG9yT3B0aW9ucyA9IHsKICAgICAgICBib3JkZXI6ICIjODg4IiwgdGV4dDogIiMwMDAwMDAiLCBvdXRlcjogIiNmZmZmZmYiLAogICAgICAgIHNpemVGb250OiAxLjUsIGJvcmRlclJhZGl1czogMTYsIGJvcmRlclR5cGU6ICJkYXNoZWQiLAogICAgICAgIGZvbnQ6ICJpbmhlcml0Iiwgc2hhZG93OiAwLjUsIGltYWdlOiAiIiwgaW1hZ2VTY2FsZTogMTAwLAogICAgICAgIHRleHRWOiAiU2VsZWN0IG9yIGRyb3AgZmlsZSIsIGZvbnRXZWlnaHQ6IDQwLCBsZXR0ZXJTcGFjaW5nOiAibm9ybWFsIgogICAgICB9OwogICAgfQoKICAgIGJvcmRlckNvbG9ycyhhcmdzKSB7CiAgICAgIHN3aXRjaCAoYXJncy5PUFRJT04pIHsKICAgICAgICBjYXNlICJ0ZXh0IjoKICAgICAgICAgIHNlbGVjdG9yT3B0aW9ucy50ZXh0ID0gYXJncy5DT0xPUjsKICAgICAgICAgIGJyZWFrOwogICAgICAgIGNhc2UgImJhY2tncm91bmQiOgogICAgICAgICAgc2VsZWN0b3JPcHRpb25zLm91dGVyID0gYXJncy5DT0xPUjsKICAgICAgICAgIHNlbGVjdG9yT3B0aW9ucy5pbWFnZSA9ICIiOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgZGVmYXVsdDogc2VsZWN0b3JPcHRpb25zLmJvcmRlciA9IGFyZ3MuQ09MT1I7CiAgICAgIH0KICAgIH0KCiAgICB2aXN1YWxzU2VsZWN0KGFyZ3MpIHsKICAgICAgc3dpdGNoIChhcmdzLk9QVElPTikgewogICAgICAgIGNhc2UgImZvbnQgc2l6ZSI6IHsgc2VsZWN0b3JPcHRpb25zLnNpemVGb250ID0gYXJncy5BTVQgLyAxMDsgYnJlYWsgfQogICAgICAgIGNhc2UgImZvbnQgdGhpY2tuZXNzIjogeyBzZWxlY3Rvck9wdGlvbnMuZm9udFdlaWdodCA9IGFyZ3MuQU1UOyBicmVhayB9CiAgICAgICAgY2FzZSAibGV0dGVyIHNwYWNpbmciOiB7IHNlbGVjdG9yT3B0aW9ucy5sZXR0ZXJTcGFjaW5nID0gYXJncy5BTVQ7IGJyZWFrIH0KICAgICAgICBjYXNlICJib3JkZXIgcmFkaXVzIjogeyBzZWxlY3Rvck9wdGlvbnMuYm9yZGVyUmFkaXVzID0gYXJncy5BTVQ7IGJyZWFrIH0KICAgICAgICBjYXNlICJzaGFkb3cgaW50ZW5zaXR5IjogeyBzZWxlY3Rvck9wdGlvbnMuc2hhZG93ID0gYXJncy5BTVQgLyAxMDA7IGJyZWFrIH0KICAgICAgICBkZWZhdWx0OiBzZWxlY3Rvck9wdGlvbnMuYm9yZGVyID0gYXJncy5BTVQ7CiAgICAgIH0KICAgIH0KCiAgICBib3JkZXJUeXBlU2V0KGFyZ3MpIHsgc2VsZWN0b3JPcHRpb25zLmJvcmRlclR5cGUgPSBhcmdzLlRZUEUgfQoKICAgIGZvbnRTZXQoYXJncykgeyBzZWxlY3Rvck9wdGlvbnMuZm9udCA9IGFyZ3MuRk9OVCB9CgogICAgY3VycmVudFgoYXJncykgewogICAgICBpZiAoYXJncy5USElORyA9PT0gInNoYWRvdyIgfHwgYXJncy5USElORyA9PT0gInNpemVGb250IikgewogICAgICAgIGNvbnN0IG11bHRpcGxpZXIgPSBhcmdzLlRISU5HID09PSAic2hhZG93IiA/IDEwMCA6IDEwOwogICAgICAgIHJldHVybiBzZWxlY3Rvck9wdGlvbnNbYXJncy5USElOR10gKiBtdWx0aXBsaWVyOwogICAgICB9CiAgICAgIHJldHVybiBzZWxlY3Rvck9wdGlvbnNbYXJncy5USElOR107CiAgICB9CgogICAgaW1hZ2VTZXQoYXJncykgewogICAgICBTY3JhdGNoLmNhbkZldGNoKGVuY29kZVVSSShhcmdzLklNRykpLnRoZW4oY2FuRmV0Y2ggPT4gewogICAgICAgIGlmIChjYW5GZXRjaCkgc2VsZWN0b3JPcHRpb25zLmltYWdlID0gYHVybCgke2VuY29kZVVSSShhcmdzLklNRyl9KWA7CiAgICAgICAgZWxzZSBjb25zb2xlLndhcm4oIkNhbm5vdCBmZXRjaCBjb250ZW50IGZyb20gdGhlIFVSTC4iKQogICAgICB9KTsKICAgIH0KCiAgICBzY2FsZUltYWdlKGFyZ3MpIHsgc2VsZWN0b3JPcHRpb25zLmltYWdlU2NhbGUgPSBhcmdzLlNDQUxFIH0KCiAgICB0ZXh0U2V0KGFyZ3MpIHsgc2VsZWN0b3JPcHRpb25zLnRleHRWID0gYXJncy5URVhUIH0KICB9CgogIFNjcmF0Y2guZXh0ZW5zaW9ucy5yZWdpc3RlcihydW50aW1lLmV4dF9maWxlc2V4cGFuZGVkID0gbmV3IGZpbGVzRXhwYW5kZWQoKSk7Cn0pKFNjcmF0Y2gpOwo=","lmscomments":"https://extensions.turbowarp.org/Lily/CommentBlocks.js"},"customFonts":[{"system":false,"family":"BreeSerif-Regular","fallback":"Sans Serif","md5ext":"79784f21a474e79737cf39bdda7ff778.ttf"},{"system":true,"family":"Bree Serif","fallback":"Sans Serif"}],"meta":{"semver":"3.0.0","platform":{"name":"TurboWarp","url":"https://turbowarp.org/"}}}